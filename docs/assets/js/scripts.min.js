"use strict";function bind(i){$("[data-id]").each(function(){var e=$(this),t=e.data("id"),n=i[t];"precio"===t?e.html(formatAmount(n)):"saldo"===t?"false"===n&&setTimeout(function(){showAdvice(e,!0)},500):e.html(n)})}function changeScreen(e,t){$(".screen").addClass("no-visible"),e.removeClass("no-visible"),t()}function formatAmount(e){return"$ "+Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function handleDigitKeyup(e){var t=e.target,n=e.keyCode,i=$(t.parentNode);8===n?0<i.prev().length&&((e=i.prev().find("input")).val(""),e.focus()):47<n&&n<58&&""!==t.value&&0<i.next().length&&i.next().find("input").focus(),validateCode()}function numberFilter(e){/^\d{0,1}$/.test(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""}function request(e,t,n,i,o){$.ajax({url:"https://omm6oug5pg.execute-api.us-east-1.amazonaws.com/desarrollo/oauth2/v1/token",method:"POST",body:{grant_type:"client_credentials"},beforeSend:function(e){e.setRequestHeader("Authorization","Basic "+btoa("18h8vanvrh4pui1lrntc1niljf:1ge31bhjrdk9d0ja14mft8qepi4clkt805jqb2svqvmb4so1v4g7"))},success:function(){console.log(arguments)}})}function fakeRequest(e,t){setTimeout(function(){t("000001"===e)},1500)}function searchToJson(){for(var e,t=location.search.substring(1).split("&"),n={},i=0;i<t.length;i++)""!==t[i]&&(e=t[i].split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return n}function showAdvice(e,t){t?e.addClass("no-visible"):e.removeClass("no-visible")}function showLoader(e){var t=$(".loader");e?(t.length<=0&&(t=$('<div class="loader">')),$("body").append(t),setTimeout(function(){return t.addClass("loader-visible")},10)):(t.removeClass("loader-visible"),setTimeout(function(){return t.remove()},375))}function validateCode(){var t=$(".auth-screen .code"),n=$(".auth-screen .digit input"),e="";n.each(function(){e+=this.value}),6===e.length?(showLoader(!0),fakeRequest(e,function(e){e?(t.addClass("valid"),changeScreen($(".resume-screen"),function(){showLoader(!1)})):(showLoader(!1),t.addClass("invalid"),setTimeout(function(){n.each(function(){$(this).val("")}),n.eq(0).focus()},100))})):t.removeClass("valid invalid")}!function(u){u.fn.swipe=function(e){var c=u.extend({cb:function(){console.log("swipe done")}},e);return this.each(function(){var t=u(this),n=0,i=0,o=!1,s=t.find(".slider"),a=t.find(".text");s.on("mousedown touchstart",function(e){o=!0,i=t.width()-u(this).width()+10,n=e.clientX||e.originalEvent.touches[0].pageX}),u(document.body,s).on("mouseup touchend",function(e){if(o){if(o=!1,(e.clientX||e.changedTouches[0].pageX)-n<i)return a.fadeTo(300,1),void s.animate({left:"-10px"},300);c.cb()}}),u(document.body).on("mousemove touchmove",function(e){var t;o&&(e=1-(t=(e.clientX||e.originalEvent.touches[0].pageX)-n)/i,a.fadeTo(0,e),t<=0?s.css({left:"-10px"}):i+10<=t?s.css({left:i+"px"}):s.css({left:t-10}))})})}}(jQuery),bind(searchToJson());var $advices=$(".advice.fixed");$advices.each(function(){var e=$(this);e.find(".close-btn").on("click",function(){showAdvice(e,!1)})}),$(".detail-screen .swipe-btn").swipe({cb:function(){showLoader(!0),setTimeout(function(){changeScreen($(".auth-screen"),function(){showLoader(!1),$(".auth-screen .digit input").eq(0).focus()})},500)}});var $digits=$(".auth-screen .digit input");$digits.on("keypress keydown keyup input change paste",numberFilter),$digits.on("keyup",handleDigitKeyup),$digits.eq(0).focus();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiLCJqcXVlcnkuc3dpcGUuanMiXSwibmFtZXMiOlsiYmluZCIsInZhbHVlcyIsIiQiLCJlYWNoIiwiJHRhZyIsInRoaXMiLCJpZCIsImRhdGEiLCJ2YWx1ZSIsImh0bWwiLCJmb3JtYXRBbW91bnQiLCJzZXRUaW1lb3V0Iiwic2hvd0FkdmljZSIsImNoYW5nZVNjcmVlbiIsIiRzY3JlZW4iLCJjYWxsYmFjayIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhbW91bnQiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwicmVwbGFjZSIsImhhbmRsZURpZ2l0S2V5dXAiLCJfcmVmIiwidGFyZ2V0Iiwia2V5Q29kZSIsIiRwYXJlbnQiLCJwYXJlbnROb2RlIiwicHJldiIsImxlbmd0aCIsIiRpbnB1dCIsImZpbmQiLCJ2YWwiLCJmb2N1cyIsIm5leHQiLCJ2YWxpZGF0ZUNvZGUiLCJudW1iZXJGaWx0ZXIiLCJldmVudCIsInRlc3QiLCJvbGRWYWx1ZSIsIm9sZFNlbGVjdGlvblN0YXJ0Iiwic2VsZWN0aW9uU3RhcnQiLCJvbGRTZWxlY3Rpb25FbmQiLCJzZWxlY3Rpb25FbmQiLCJoYXNPd25Qcm9wZXJ0eSIsInNldFNlbGVjdGlvblJhbmdlIiwicmVxdWVzdCIsInVybCIsIm1ldGhvZCIsImJvZHkiLCJoZWFkZXJzIiwiYWpheCIsImdyYW50X3R5cGUiLCJiZWZvcmVTZW5kIiwianFYSFIiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiYnRvYSIsInN1Y2Nlc3MiLCJjb25zb2xlIiwibG9nIiwiYXJndW1lbnRzIiwiZmFrZVJlcXVlc3QiLCJjb2RlIiwic2VhcmNoVG9Kc29uIiwicGFydHMiLCJwYWlycyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic3BsaXQiLCJvYmplY3QiLCJpIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiJGVsIiwiZmxhZyIsInNob3dMb2FkZXIiLCJzaG93IiwiJGxvYWRlciIsImFwcGVuZCIsInJlbW92ZSIsIiRjb2RlIiwiJGRpZ2l0cyIsImVxIiwiZm4iLCJzd2lwZSIsIm9wdGlvbnMiLCJzZXR0aW5ncyIsImV4dGVuZCIsImNiIiwiJHRoaXMiLCJpbml0aWFsTW91c2UiLCJzbGlkZU1vdmVtZW50VG90YWwiLCJtb3VzZUlzRG93biIsIiRzbGlkZXIiLCIkdGV4dCIsIm9uIiwid2lkdGgiLCJjbGllbnRYIiwib3JpZ2luYWxFdmVudCIsInRvdWNoZXMiLCJwYWdlWCIsImRvY3VtZW50IiwiY2hhbmdlZFRvdWNoZXMiLCJmYWRlVG8iLCJhbmltYXRlIiwibGVmdCIsInJlbGF0aXZlTW91c2UiLCJzbGlkZVBlcmNlbnQiLCJjc3MiLCJqUXVlcnkiLCIkYWR2aWNlcyIsIiRhZHZpY2UiXSwibWFwcGluZ3MiOiJhQUlBLFNBQUFBLEtBQUFDLEdBQ0FDLEVBQUEsYUFFQUMsS0FBQSxXQUNBLElBQUFDLEVBQUFGLEVBQUFHLE1BQ0FDLEVBQUFGLEVBQUFHLEtBQUEsTUFDQUMsRUFBQVAsRUFBQUssR0FFQSxXQUFBQSxFQUNBRixFQUFBSyxLQUFBQyxhQUFBRixJQUNBLFVBQUFGLEVBQ0EsVUFBQUUsR0FDQUcsV0FBQSxXQUFBQyxXQUFBUixHQUFBLElBQUEsS0FHQUEsRUFBQUssS0FBQUQsS0FVQSxTQUFBSyxhQUFBQyxFQUFBQyxHQUNBYixFQUFBLFdBQUFjLFNBQUEsY0FDQUYsRUFBQUcsWUFBQSxjQUVBRixJQVFBLFNBQUFMLGFBQUFRLEdBQ0EsTUFBQSxLQUFBQyxPQUFBRCxHQUFBRSxRQUFBLEdBQUFDLFFBQUEsd0JBQUEsS0FPQSxTQUFBQyxpQkFBQUMsR0FBQSxJQUFBQyxFQUFBRCxFQUFBQyxPQUFBQyxFQUFBRixFQUFBRSxRQUNBQyxFQUFBeEIsRUFBQXNCLEVBQUFHLFlBRUEsSUFBQUYsRUFDQSxFQUFBQyxFQUFBRSxPQUFBQyxVQUNBQyxFQUFBSixFQUFBRSxPQUFBRyxLQUFBLFVBRUFDLElBQUEsSUFDQUYsRUFBQUcsU0FHQSxHQUFBUixHQUFBQSxFQUFBLElBQ0EsS0FBQUQsRUFBQWhCLE9BQ0EsRUFBQWtCLEVB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LEdBQUF1RCxFQUFBLENBTUEsR0FKQUEsR0FBQSxHQUNBdkQsRUFBQTRELFNBQUE1RCxFQUFBaUUsZUFBQSxHQUFBRixPQUNBVixFQUVBQyxFQUtBLE9BSkFHLEVBQUFTLE9BQUEsSUFBQSxRQUNBVixFQUFBVyxRQUFBLENBQ0FDLEtBQUEsU0FDQSxLQWdCQW5CLEVBQUFFLFFBSUF0RixFQUFBbUcsU0FBQXBELE1BQUE4QyxHQUFBLHNCQUFBLFNBQUExRCxHQUNBLElBSUFxRSxFQUpBZCxJQUtBZSxFQUFBLEdBREFELEdBREFyRSxFQUFBNEQsU0FBQTVELEVBQUE2RCxjQUFBQyxRQUFBLEdBQUFDLE9BQ0FWLEdBQ0FDLEVBRUFHLEVBQUFTLE9BQUEsRUFBQUksR0FFQUQsR0FBQSxFQUNBYixFQUFBZSxJQUFBLENBQUFILEtBQUEsVUFHQWQsRUFBQSxJQUFBZSxFQUNBYixFQUFBZSxJQUFBLENBQUFILEtBQUFkLEVBQUEsT0FHQUUsRUFBQWUsSUFBQSxDQUFBSCxLQUFBQyxFQUFBLFdBdkVBLENBMkVBRyxRRDhJQTdHLEtBQUErRCxnQkFFQSxJQUFBK0MsU0FBQTVHLEVBQUEsaUJBRUE0RyxTQUFBM0csS0FBQSxXQUNBLElBQUE0RyxFQUFBN0csRUFBQUcsTUFDQTBHLEVBQUFoRixLQUFBLGNBRUFnRSxHQUFBLFFBQUEsV0FDQW5GLFdBQUFtRyxHQUFBLE9BSUE3RyxFQUFBLDZCQUFBa0YsTUFBQSxDQUNBSSxHQUFBLFdBQ0FiLFlBQUEsR0FFQWhFLFdBQUEsV0FDQUUsYUFBQVgsRUFBQSxnQkFBQSxXQUNBeUUsWUFBQSxHQUNBekUsRUFBQSw2QkFBQWdGLEdBQUEsR0FBQWpELFdBRUEsUUFNQSxJQUFBZ0QsUUFBQS9FLEVBQUEsNkJBRUErRSxRQUFBYyxHQUFBLDRDQUFBM0QsY0FDQTZDLFFBQUFjLEdBQUEsUUFBQXpFLGtCQUVBMkQsUUFBQUMsR0FBQSxHQUFBakQiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQmluZCBKU09OIHRvIEhUTUwuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZXNcclxuICovXHJcbmZ1bmN0aW9uIGJpbmQodmFsdWVzKSB7XHJcbiAgICBjb25zdCAkdGFncyA9ICQoJ1tkYXRhLWlkXScpO1xyXG5cclxuICAgICR0YWdzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnN0ICR0YWcgPSAkKHRoaXMpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gJHRhZy5kYXRhKCdpZCcpO1xyXG4gICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2lkXTtcclxuXHJcbiAgICAgICAgaWYgKGlkID09PSAncHJlY2lvJykge1xyXG4gICAgICAgICAgICAkdGFnLmh0bWwoZm9ybWF0QW1vdW50KHZhbHVlKSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpZCA9PT0gJ3NhbGRvJykge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUgPT09ICdmYWxzZScpIHtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4geyBzaG93QWR2aWNlKCR0YWcsIHRydWUpOyB9LCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHRhZy5odG1sKHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENoYW5nZSBzY3JlZW4uXHJcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkc2NyZWVuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAqL1xyXG5mdW5jdGlvbiBjaGFuZ2VTY3JlZW4oJHNjcmVlbiwgY2FsbGJhY2spIHtcclxuICAgICQoJy5zY3JlZW4nKS5hZGRDbGFzcygnbm8tdmlzaWJsZScpO1xyXG4gICAgJHNjcmVlbi5yZW1vdmVDbGFzcygnbm8tdmlzaWJsZScpO1xyXG5cclxuICAgIGNhbGxiYWNrKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYW1vdW50IHdpdGggY3VycmVuY3kgZm9ybWF0LlxyXG4gKiBAcGFyYW0ge251bWJlcn0gYW1vdW50IFxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuZnVuY3Rpb24gZm9ybWF0QW1vdW50KGFtb3VudCkge1xyXG4gICAgcmV0dXJuICckICcgKyBOdW1iZXIoYW1vdW50KS50b0ZpeGVkKDIpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csICcsJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGUgZGlnaXQga2V5dXAgZXZlbnQuXHJcbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0gZXZlbnRcclxuICovXHJcbmZ1bmN0aW9uIGhhbmRsZURpZ2l0S2V5dXAoeyB0YXJnZXQsIGtleUNvZGUgfSkge1xyXG4gICAgY29uc3QgJHBhcmVudCA9ICQodGFyZ2V0LnBhcmVudE5vZGUpO1xyXG5cclxuICAgIGlmIChrZXlDb2RlID09PSA4KSB7XHJcbiAgICAgICAgaWYgKCRwYXJlbnQucHJldigpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgY29uc3QgJGlucHV0ID0gJHBhcmVudC5wcmV2KCkuZmluZCgnaW5wdXQnKTtcclxuXHJcbiAgICAgICAgICAgICRpbnB1dC52YWwoJycpO1xyXG4gICAgICAgICAgICAkaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBlbHNlIGlmIChrZXlDb2RlID4gNDcgJiYga2V5Q29kZSA8IDU4KSB7XHJcbiAgICAgICAgaWYgKHRhcmdldC52YWx1ZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgaWYgKCRwYXJlbnQubmV4dCgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0ICRpbnB1dCA9ICRwYXJlbnQubmV4dCgpLmZpbmQoJ2lucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICAkaW5wdXQuZm9jdXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YWxpZGF0ZUNvZGUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFwcGx5IG51bWJlciBmaWx0ZXIuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBudW1iZXJGaWx0ZXIoZXZlbnQpIHtcclxuICAgIGNvbnN0IGZpbHRlciA9IC9eXFxkezAsMX0kLztcclxuXHJcbiAgICBpZiAoZmlsdGVyLnRlc3QodGhpcy52YWx1ZSkpIHtcclxuICAgICAgICB0aGlzLm9sZFZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgICB0aGlzLm9sZFNlbGVjdGlvblN0YXJ0ID0gdGhpcy5zZWxlY3Rpb25TdGFydDtcclxuICAgICAgICB0aGlzLm9sZFNlbGVjdGlvbkVuZCA9IHRoaXMuc2VsZWN0aW9uRW5kO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc093blByb3BlcnR5KCdvbGRWYWx1ZScpKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMub2xkVmFsdWU7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLm9sZFNlbGVjdGlvblN0YXJ0LCB0aGlzLm9sZFNlbGVjdGlvbkVuZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSAnJztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIE1ha2UgcmVxdWVzdC5cclxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBcclxuICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZFxyXG4gKiBAcGFyYW0ge29iamVjdH0gYm9keVxyXG4gKiBAcGFyYW0ge29iamVjdH0gaGVhZGVycyBcclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgXHJcbiAqL1xyXG5mdW5jdGlvbiByZXF1ZXN0KHVybCwgbWV0aG9kLCBib2R5LCBoZWFkZXJzLCBjYWxsYmFjaykge1xyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB1cmw6ICdodHRwczovL29tbTZvdWc1cGcuZXhlY3V0ZS1hcGkudXMtZWFzdC0xLmFtYXpvbmF3cy5jb20vZGVzYXJyb2xsby9vYXV0aDIvdjEvdG9rZW4nLFxyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGJvZHk6IHsgJ2dyYW50X3R5cGUnOiAnY2xpZW50X2NyZWRlbnRpYWxzJyB9LFxyXG4gICAgICAgIGJlZm9yZVNlbmQ6IGZ1bmN0aW9uIChqcVhIUikge1xyXG4gICAgICAgICAgICBqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCdBdXRob3JpemF0aW9uJywgXCJCYXNpYyBcIiArIGJ0b2EoJzE4aDh2YW52cmg0cHVpMWxybnRjMW5pbGpmJyArIFwiOlwiICsgJzFnZTMxYmhqcmRrOWQwamExNG1mdDhxZXBpNGNsa3Q4MDVqcWIyc3Zxdm1iNHNvMXY0ZzcnKSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3VtZW50cyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEbyBmYWtlIHJlcXVlc3QuXHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXHJcbiAqL1xyXG5mdW5jdGlvbiBmYWtlUmVxdWVzdChjb2RlLCBjYWxsYmFjaykge1xyXG4gICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY2FsbGJhY2soY29kZSA9PT0gJzAwMDAwMScpO1xyXG4gICAgfSwgMTUwMCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBsb2NhdGlvbi5zZWFyY2ggdG8gSlNPTi5cclxuICogQHJldHVybnMgb2JqZWN0XHJcbiAqL1xyXG5mdW5jdGlvbiBzZWFyY2hUb0pzb24oKSB7XHJcbiAgICBjb25zdCBwYWlycyA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoJyYnKTtcclxuICAgIGNvbnN0IG9iamVjdCA9IHt9O1xyXG4gICAgbGV0IGkgPSAwO1xyXG5cclxuICAgIGZvciAoOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBpZiAocGFpcnNbaV0gPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcGFydHMgPSBwYWlyc1tpXS5zcGxpdCgnPScpO1xyXG4gICAgICAgIG9iamVjdFtkZWNvZGVVUklDb21wb25lbnQocGFydHNbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYXJ0c1sxXSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9iamVjdDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3cgb3IgaGlkZSBhZHZpY2UuXHJcbiAqIEBwYXJhbSB7alF1ZXJ5fSAkZWwgXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZyBcclxuICovXHJcbmZ1bmN0aW9uIHNob3dBZHZpY2UoJGVsLCBmbGFnKSB7XHJcbiAgICBpZiAoZmxhZykge1xyXG4gICAgICAgICRlbC5hZGRDbGFzcygnbm8tdmlzaWJsZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkZWwucmVtb3ZlQ2xhc3MoJ25vLXZpc2libGUnKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFNob3cgb3IgaGlkZSBsb2FkZXIuXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvd1xyXG4gKi9cclxuZnVuY3Rpb24gc2hvd0xvYWRlcihzaG93KSB7XHJcbiAgICBsZXQgJGxvYWRlciA9ICQoJy5sb2FkZXInKTtcclxuICAgIFxyXG4gICAgaWYgKHNob3cpIHtcclxuICAgICAgICBpZiAoJGxvYWRlci5sZW5ndGggPD0gMCkge1xyXG4gICAgICAgICAgICAkbG9hZGVyID0gJCgnPGRpdiBjbGFzcz1cImxvYWRlclwiPicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgkbG9hZGVyKTtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+ICRsb2FkZXIuYWRkQ2xhc3MoJ2xvYWRlci12aXNpYmxlJyksIDEwKTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICRsb2FkZXIucmVtb3ZlQ2xhc3MoJ2xvYWRlci12aXNpYmxlJyk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiAkbG9hZGVyLnJlbW92ZSgpLCAzNzUpO1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGNvZGUgZnJvbSBjbGllbnQuXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVDb2RlKCkge1xyXG4gICAgY29uc3QgJGNvZGUgPSAkKCcuYXV0aC1zY3JlZW4gLmNvZGUnKTtcclxuICAgIGNvbnN0ICRkaWdpdHMgPSAkKCcuYXV0aC1zY3JlZW4gLmRpZ2l0IGlucHV0Jyk7XHJcbiAgICBsZXQgY29kZSA9IFwiXCI7XHJcblxyXG4gICAgJGRpZ2l0cy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb2RlICs9IHRoaXMudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpZiAoY29kZS5sZW5ndGggPT09IDYpIHtcclxuICAgICAgICBzaG93TG9hZGVyKHRydWUpO1xyXG5cclxuICAgICAgICBmYWtlUmVxdWVzdChjb2RlLCBzdWNjZXNzID0+IHtcclxuICAgICAgICAgICAgaWYgKHN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICRjb2RlLmFkZENsYXNzKCd2YWxpZCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNoYW5nZVNjcmVlbigkKCcucmVzdW1lLXNjcmVlbicpLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRlcihmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNob3dMb2FkZXIoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgJGNvZGUuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAkZGlnaXRzLmVhY2goZnVuY3Rpb24gKCkgeyAkKHRoaXMpLnZhbCgnJyk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICRkaWdpdHMuZXEoMCkuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgJGNvZGUucmVtb3ZlQ2xhc3MoJ3ZhbGlkIGludmFsaWQnKTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8vIEluaXRpYWxpemUgRGV0YWlsIFNjcmVlbiBjb21wb25lbnRzLlxyXG5iaW5kKHNlYXJjaFRvSnNvbigpKTtcclxuXHJcbmNvbnN0ICRhZHZpY2VzID0gJCgnLmFkdmljZS5maXhlZCcpO1xyXG5cclxuJGFkdmljZXMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCAkYWR2aWNlID0gJCh0aGlzKTtcclxuICAgIGNvbnN0ICRjbG9zZUJ0biA9ICRhZHZpY2UuZmluZCgnLmNsb3NlLWJ0bicpO1xyXG5cclxuICAgICRjbG9zZUJ0bi5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgc2hvd0FkdmljZSgkYWR2aWNlLCBmYWxzZSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG4kKCcuZGV0YWlsLXNjcmVlbiAuc3dpcGUtYnRuJykuc3dpcGUoe1xyXG4gICAgY2I6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBzaG93TG9hZGVyKHRydWUpO1xyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgY2hhbmdlU2NyZWVuKCQoJy5hdXRoLXNjcmVlbicpLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzaG93TG9hZGVyKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICQoJy5hdXRoLXNjcmVlbiAuZGlnaXQgaW5wdXQnKS5lcSgwKS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCA1MDApO1xyXG4gICAgfVxyXG59KTtcclxuXHJcblxyXG4vLyBJbml0aWFsaXplIEF1dGggU2NyZWVuIGNvbXBvbmVudHMuXHJcbmNvbnN0ICRkaWdpdHMgPSAkKCcuYXV0aC1zY3JlZW4gLmRpZ2l0IGlucHV0Jyk7XHJcblxyXG4kZGlnaXRzLm9uKCdrZXlwcmVzcyBrZXlkb3duIGtleXVwIGlucHV0IGNoYW5nZSBwYXN0ZScsIG51bWJlckZpbHRlcilcclxuJGRpZ2l0cy5vbigna2V5dXAnLCBoYW5kbGVEaWdpdEtleXVwKTtcclxuXHJcbiRkaWdpdHMuZXEoMCkuZm9jdXMoKTtcclxuIiwiLy8gUmVmZXJlbmNlOiBodHRwczovL2NvZGVwZW4uaW8vZ3ByZXNzdXR0bzUvcGVuL05qSm9iRz9lZGl0b3JzPTAwMTBcclxuXHJcbihmdW5jdGlvbiAoJCkge1xyXG4gICAgJC5mbi5zd2lwZSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIHNldHRpbmdzID0gJC5leHRlbmQoe1xyXG4gICAgICAgICAgICBjYjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3dpcGUgZG9uZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgb3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbE1vdXNlID0gMDtcclxuICAgICAgICAgICAgdmFyIHNsaWRlTW92ZW1lbnRUb3RhbCA9IDA7XHJcbiAgICAgICAgICAgIHZhciBtb3VzZUlzRG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICB2YXIgJHNsaWRlciA9ICR0aGlzLmZpbmQoJy5zbGlkZXInKTtcclxuICAgICAgICAgICAgdmFyICR0ZXh0ID0gJHRoaXMuZmluZCgnLnRleHQnKTtcclxuXHJcbiAgICAgICAgICAgICRzbGlkZXIub24oJ21vdXNlZG93biB0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBtb3VzZUlzRG93biA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzbGlkZU1vdmVtZW50VG90YWwgPSAkdGhpcy53aWR0aCgpIC0gJCh0aGlzKS53aWR0aCgpICsgMTA7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsTW91c2UgPSBldmVudC5jbGllbnRYIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKGRvY3VtZW50LmJvZHksICRzbGlkZXIpLm9uKCdtb3VzZXVwIHRvdWNoZW5kJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1vdXNlSXNEb3duKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIG1vdXNlSXNEb3duID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE1vdXNlID0gZXZlbnQuY2xpZW50WCB8fCBldmVudC5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHZhciByZWxhdGl2ZU1vdXNlID0gY3VycmVudE1vdXNlIC0gaW5pdGlhbE1vdXNlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZWxhdGl2ZU1vdXNlIDwgc2xpZGVNb3ZlbWVudFRvdGFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRleHQuZmFkZVRvKDMwMCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNsaWRlci5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogXCItMTBweFwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLyogJHNsaWRlci5hZGRDbGFzcygndW5sb2NrZWQnKTtcclxuICAgICAgICAgICAgICAgICQoJyNsb2NrZXInKS50ZXh0KCdsb2NrX291dGxpbmUnKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzbGlkZXIub24oJ2NsaWNrIHRhcCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISRzbGlkZXIuaGFzQ2xhc3MoJ3VubG9ja2VkJykpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzbGlkZXIucmVtb3ZlQ2xhc3MoJ3VubG9ja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNsb2NrZXInKS50ZXh0KCdsb2NrX29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNsaWRlci5vZmYoJ2NsaWNrIHRhcCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMCk7ICovXHJcblxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuY2IoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkub24oJ21vdXNlbW92ZSB0b3VjaG1vdmUnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGlmICghbW91c2VJc0Rvd24pXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50TW91c2UgPSBldmVudC5jbGllbnRYIHx8IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWDtcclxuICAgICAgICAgICAgICAgIHZhciByZWxhdGl2ZU1vdXNlID0gY3VycmVudE1vdXNlIC0gaW5pdGlhbE1vdXNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNsaWRlUGVyY2VudCA9IDEgLSAocmVsYXRpdmVNb3VzZSAvIHNsaWRlTW92ZW1lbnRUb3RhbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHRleHQuZmFkZVRvKDAsIHNsaWRlUGVyY2VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlTW91c2UgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICRzbGlkZXIuY3NzKHsgJ2xlZnQnOiAnLTEwcHgnIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChyZWxhdGl2ZU1vdXNlID49IHNsaWRlTW92ZW1lbnRUb3RhbCArIDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJHNsaWRlci5jc3MoeyAnbGVmdCc6IHNsaWRlTW92ZW1lbnRUb3RhbCArICdweCcgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHNsaWRlci5jc3MoeyAnbGVmdCc6IHJlbGF0aXZlTW91c2UgLSAxMCB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKGpRdWVyeSk7XHJcbiJdfQ==

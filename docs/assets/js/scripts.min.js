"use strict";function addListener(t,e,n){function i(e,t,n){e.split(" ").forEach(function(e){return t.addEventListener(e,n)})}e instanceof NodeList?[].forEach.call(e,function(e){return i(t,e,n)}):i(t,e,n)}function bind(i){var e=qa("[data-id]");[].forEach.call(e,function(e){var t=e.dataset.id,n=i[t];"precio"===t?e.innerHTML=formatAmount(n):"saldo"===t?"false"===n&&setTimeout(function(){showAdvice(e,!0)},500):e.innerHTML=n})}function formatAmount(e){return"$ "+Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function handleDigitKeyup(e){var t=e.target,n=e.keyCode,i=t.parentNode;8===n?(e=i.previousElementSibling)&&((e=q("input",e)).value="",e.focus()):47<n&&n<58&&(""===t.value||(i=i.nextElementSibling)&&q("input",i).focus()),validateCode()}function numberFilter(e){/^\d{0,1}$/.test(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""}function searchToJson(){for(var e,t=location.search.substring(1).split("&"),n={},i=0;i<t.length;i++)""!==t[i]&&(e=t[i].split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return n}function showAdvice(e,t){t?e.classList.remove("no-visible"):e.classList.add("no-visible")}function q(e,t){return(t||document).querySelector(e)}function qa(e,t){return(t||document).querySelectorAll(e)}function validateCode(){var e=q(".auth-screen .code"),t=qa(".auth-screen .digit input"),n="";[].forEach.call(t,function(e){n+=e.value}),6===n.length&&("000001"===n?e.classList.add("valid"):e.classList.add("invalid"))}var advices,digits;!function(c){c.fn.swipe=function(){return this.each(function(){var t=c(this),n=0,i=0,o=!1,a=t.find(".slider");a.on("mousedown touchstart",function(e){o=!0,i=t.width()-c(this).width()+10,n=e.clientX||e.originalEvent.touches[0].pageX}),c(document.body,a).on("mouseup touchend",function(e){if(o){if(o=!1,(e.clientX||e.changedTouches[0].pageX)-n<i)return t.find(".text").fadeTo(300,1),void a.animate({left:"-10px"},300);a.addClass("unlocked"),c("#locker").text("lock_outline"),setTimeout(function(){a.on("click tap",function(e){a.hasClass("unlocked")&&(a.removeClass("unlocked"),c("#locker").text("lock_open"),a.off("click tap"))})},0)}}),c(document.body).on("mousemove touchmove",function(e){var t;o&&(e=1-(t=(e.clientX||e.originalEvent.touches[0].pageX)-n)/i,c(".slide-text").fadeTo(0,e),t<=0?a.css({left:"-10px"}):i+10<=t?a.css({left:i+"px"}):a.css({left:t-10}))})})}}(jQuery),0<=location.pathname.indexOf("detail")?(advices=qa(".advice.fixed"),[].forEach.call(advices,function(e){addListener("click",q(".close-btn",e),function(){showAdvice(e,!1)})}),$(".swipe-btn").swipe(),bind(searchToJson())):0<=location.pathname.indexOf("auth")&&(addListener("keypress keydown keyup input change paste",digits=qa(".auth-screen .digit input"),numberFilter),addListener("keyup",digits,handleDigitKeyup),digits[0].focus());
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdHMuanMiLCJqcXVlcnkuc3dpcGUuanMiXSwibmFtZXMiOlsiYWRkTGlzdGVuZXIiLCJldmVudHMiLCJlbHMiLCJoYW5kbGVyIiwiYWRkIiwiZWwiLCJzcGxpdCIsImZvckVhY2giLCJldmVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJOb2RlTGlzdCIsImNhbGwiLCJiaW5kIiwidmFsdWVzIiwidGFncyIsInFhIiwidGFnIiwiaWQiLCJkYXRhc2V0IiwidmFsdWUiLCJpbm5lckhUTUwiLCJmb3JtYXRBbW91bnQiLCJzZXRUaW1lb3V0Iiwic2hvd0FkdmljZSIsImFtb3VudCIsIk51bWJlciIsInRvRml4ZWQiLCJyZXBsYWNlIiwiaGFuZGxlRGlnaXRLZXl1cCIsIl9yZWYiLCJ0YXJnZXQiLCJrZXlDb2RlIiwicGFyZW50IiwicGFyZW50Tm9kZSIsInByZXYiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwiaW5wdXQiLCJxIiwiZm9jdXMiLCJuZXh0IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidmFsaWRhdGVDb2RlIiwibnVtYmVyRmlsdGVyIiwiZSIsInRlc3QiLCJ0aGlzIiwib2xkVmFsdWUiLCJvbGRTZWxlY3Rpb25TdGFydCIsInNlbGVjdGlvblN0YXJ0Iiwib2xkU2VsZWN0aW9uRW5kIiwic2VsZWN0aW9uRW5kIiwiaGFzT3duUHJvcGVydHkiLCJzZXRTZWxlY3Rpb25SYW5nZSIsInNlYXJjaFRvSnNvbiIsInBhcnRzIiwicGFpcnMiLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsIm9iamVjdCIsImkiLCJsZW5ndGgiLCJkZWNvZGVVUklDb21wb25lbnQiLCJmbGFnIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwic2VsZWN0b3IiLCJjb250ZXh0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicXVlcnlTZWxlY3RvckFsbCIsImNvZGVFbCIsImRpZ2l0cyIsImNvZGUiLCJkaWdpdCIsImFkdmljZXMiLCIkIiwiZm4iLCJzd2lwZSIsImVhY2giLCIkdGhpcyIsImluaXRpYWxNb3VzZSIsInNsaWRlTW92ZW1lbnRUb3RhbCIsIm1vdXNlSXNEb3duIiwic2xpZGVyIiwiZmluZCIsIm9uIiwid2lkdGgiLCJjbGllbnRYIiwib3JpZ2luYWxFdmVudCIsInRvdWNoZXMiLCJwYWdlWCIsImJvZHkiLCJjaGFuZ2VkVG91Y2hlcyIsImZhZGVUbyIsImFuaW1hdGUiLCJsZWZ0IiwiYWRkQ2xhc3MiLCJ0ZXh0IiwiaGFzQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIm9mZiIsInJlbGF0aXZlTW91c2UiLCJzbGlkZVBlcmNlbnQiLCJjc3MiLCJqUXVlcnkiLCJwYXRobmFtZSIsImluZGV4T2YiLCJhZHZpY2UiXSwibWFwcGluZ3MiOiJhQU1BLFNBQUFBLFlBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsU0FBQUMsRUFBQUgsRUFBQUksRUFBQUYsR0FDQUYsRUFBQUssTUFBQSxLQUFBQyxRQUFBLFNBQUFDLEdBQUEsT0FBQUgsRUFBQUksaUJBQUFELEVBQUFMLEtBR0FELGFBQUFRLFNBQ0EsR0FBQUgsUUFBQUksS0FBQVQsRUFBQSxTQUFBRyxHQUFBLE9BQUFELEVBQUFILEVBQUFJLEVBQUFGLEtBRUFDLEVBQUFILEVBQUFDLEVBQUFDLEdBUUEsU0FBQVMsS0FBQUMsR0FDQSxJQUFBQyxFQUFBQyxHQUFBLGFBRUEsR0FBQVIsUUFBQUksS0FBQUcsRUFBQSxTQUFBRSxHQUNBLElBQUFDLEVBQUFELEVBQUFFLFFBQUEsR0FDQUMsRUFBQU4sRUFBQUksR0FFQSxXQUFBQSxFQUNBRCxFQUFBSSxVQUFBQyxhQUFBRixHQUNBLFVBQUFGLEVBQ0EsVUFBQUUsR0FDQUcsV0FBQSxXQUFBQyxXQUFBUCxHQUFBLElBQUEsS0FHQUEsRUFBQUksVUFBQUQsSUFVQSxTQUFBRSxhQUFBRyxHQUNBLE1BQUEsS0FBQUMsT0FBQUQsR0FBQUUsUUFBQSxHQUFBQyxRQUFBLHdCQUFBLEtBT0EsU0FBQUMsaUJBQUFDLEdBQUEsSUFBQUMsRUFBQUQsRUFBQUMsT0FBQUMsRUFBQUYsRUFBQUUs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QUFDLE9BQ0FWLEdBQ0FDLEVBRUFOLEVBQUEsZUFBQWtCLE9BQUEsRUFBQVMsR0FFQUQsR0FBQSxFQUNBbEIsRUFBQW9CLElBQUEsQ0FBQVIsS0FBQSxVQUdBZCxFQUFBLElBQUFvQixFQUNBbEIsRUFBQW9CLElBQUEsQ0FBQVIsS0FBQWQsRUFBQSxPQUdBRSxFQUFBb0IsSUFBQSxDQUFBUixLQUFBTSxFQUFBLFdBNURBLENBZ0VBRyxRRDhHQSxHQUFBakQsU0FBQWtELFNBQUFDLFFBQUEsV0FDQWhDLFFBQUE1RCxHQUFBLGlCQUVBLEdBQUFSLFFBQUFJLEtBQUFnRSxRQUFBLFNBQUFpQyxHQUVBNUcsWUFBQSxRQURBcUMsRUFBQSxhQUFBdUUsR0FDQSxXQUFBckYsV0FBQXFGLEdBQUEsT0FHQWhDLEVBQUEsY0FBQUUsUUFFQWxFLEtBQUF5QyxpQkFFQSxHQUFBRyxTQUFBa0QsU0FBQUMsUUFBQSxVQUdBM0csWUFBQSw0Q0FGQXdFLE9BQUF6RCxHQUFBLDZCQUVBMkIsY0FDQTFDLFlBQUEsUUFBQXdFLE9BQUE1QyxrQkFFQTRDLE9BQUEsR0FBQWxDIiwiZmlsZSI6InNjcmlwdHMubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEFkZCBoYW5kbGVyIHdoZW4gYW4gZXZlbnQgb2NjdXIgdG8gYW4gZWxlbWVudC5cclxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50c1xyXG4gKiBAcGFyYW0ge05vZGV8Tm9kZUxpc3R9IGVsc1xyXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBoYW5kbGVyXHJcbiAqL1xyXG4gZnVuY3Rpb24gYWRkTGlzdGVuZXIoZXZlbnRzLCBlbHMsIGhhbmRsZXIpIHtcclxuICAgIGNvbnN0IGFkZCA9IChldmVudHMsIGVsLCBoYW5kbGVyKSA9PiB7XHJcbiAgICAgICAgZXZlbnRzLnNwbGl0KCcgJykuZm9yRWFjaChldmVudCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBoYW5kbGVyKSk7XHJcbiAgICB9O1xyXG5cclxuICAgIGlmIChlbHMgaW5zdGFuY2VvZiBOb2RlTGlzdCkge1xyXG4gICAgICAgIFtdLmZvckVhY2guY2FsbChlbHMsIGVsID0+IGFkZChldmVudHMsIGVsLCBoYW5kbGVyKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGFkZChldmVudHMsIGVscywgaGFuZGxlcik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCaW5kIEpTT04gdG8gSFRNTC5cclxuICogQHBhcmFtIHtvYmplY3R9IHZhbHVlc1xyXG4gKi9cclxuIGZ1bmN0aW9uIGJpbmQodmFsdWVzKSB7XHJcbiAgICBjb25zdCB0YWdzID0gcWEoJ1tkYXRhLWlkXScpO1xyXG5cclxuICAgIFtdLmZvckVhY2guY2FsbCh0YWdzLCB0YWcgPT4ge1xyXG4gICAgICAgIGNvbnN0IGlkID0gdGFnLmRhdGFzZXRbJ2lkJ107XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNbaWRdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChpZCA9PT0gJ3ByZWNpbycpIHtcclxuICAgICAgICAgICAgdGFnLmlubmVySFRNTCA9IGZvcm1hdEFtb3VudCh2YWx1ZSk7ICAgIFxyXG4gICAgICAgIH0gZWxzZSBpZiAoaWQgPT09ICdzYWxkbycpIHtcclxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAnZmFsc2UnKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsgc2hvd0FkdmljZSh0YWcsIHRydWUpOyB9LCA1MDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGFnLmlubmVySFRNTCA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGFtb3VudCB3aXRoIGN1cnJlbmN5IGZvcm1hdC5cclxuICogQHBhcmFtIHtudW1iZXJ9IGFtb3VudCBcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbiBmdW5jdGlvbiBmb3JtYXRBbW91bnQoYW1vdW50KSB7XHJcbiAgICByZXR1cm4gJyQgJyArIE51bWJlcihhbW91bnQpLnRvRml4ZWQoMikucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgJywnKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZSBkaWdpdCBrZXl1cCBldmVudC5cclxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudFxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlRGlnaXRLZXl1cCh7dGFyZ2V0LCBrZXlDb2RlfSkge1xyXG4gICAgY29uc3QgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XHJcbiAgICBcclxuICAgIGlmIChrZXlDb2RlID09PSA4KSB7XHJcbiAgICAgICAgY29uc3QgcHJldiA9IHBhcmVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgICAgICBpZiAocHJldikge1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dCA9IHEoJ2lucHV0JywgcHJldik7XHJcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gJyc7XHJcbiAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA+IDQ3ICYmIGtleUNvZGUgPCA1OCkge1xyXG4gICAgICAgIGlmICh0YXJnZXQudmFsdWUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG5leHQgPSBwYXJlbnQubmV4dEVsZW1lbnRTaWJsaW5nO1xyXG5cclxuICAgICAgICAgICAgaWYgKG5leHQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gcSgnaW5wdXQnLCBuZXh0KTtcclxuICAgICAgICAgICAgICAgIGlucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdmFsaWRhdGVDb2RlKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBBcHBseSBudW1iZXIgZmlsdGVyLlxyXG4gKi9cclxuZnVuY3Rpb24gbnVtYmVyRmlsdGVyKGUpIHtcclxuICAgIGNvbnN0IGZpbHRlciA9IC9eXFxkezAsMX0kLztcclxuXHJcbiAgICBpZiAoZmlsdGVyLnRlc3QodGhpcy52YWx1ZSkpIHtcclxuICAgICAgICB0aGlzLm9sZFZhbHVlID0gdGhpcy52YWx1ZTtcclxuICAgICAgICB0aGlzLm9sZFNlbGVjdGlvblN0YXJ0ID0gdGhpcy5zZWxlY3Rpb25TdGFydDtcclxuICAgICAgICB0aGlzLm9sZFNlbGVjdGlvbkVuZCA9IHRoaXMuc2VsZWN0aW9uRW5kO1xyXG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc093blByb3BlcnR5KCdvbGRWYWx1ZScpKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMub2xkVmFsdWU7XHJcbiAgICAgICAgdGhpcy5zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLm9sZFNlbGVjdGlvblN0YXJ0LCB0aGlzLm9sZFNlbGVjdGlvbkVuZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSAnJztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGxvY2F0aW9uLnNlYXJjaCB0byBKU09OLlxyXG4gKiBAcmV0dXJucyBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIHNlYXJjaFRvSnNvbigpIHtcclxuICAgIGNvbnN0IHBhaXJzID0gbG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKS5zcGxpdCgnJicpO1xyXG4gICAgY29uc3Qgb2JqZWN0ID0ge307XHJcbiAgICBsZXQgaSA9IDA7XHJcblxyXG4gICAgZm9yICg7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGlmIChwYWlyc1tpXSA9PT0gJycpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHBhaXJzW2ldLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgb2JqZWN0W2RlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb2JqZWN0O1xyXG59XHJcblxyXG4vKipcclxuICogU2hvdyBvciBoaWRlIGFkdmljZS5cclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gZWwgXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZyBcclxuICovXHJcbmZ1bmN0aW9uIHNob3dBZHZpY2UoZWwsIGZsYWcpIHtcclxuICAgIGlmIChmbGFnKSB7XHJcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZSgnbm8tdmlzaWJsZScpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCduby12aXNpYmxlJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEbyBxdWVyeVNlbGVjdG9yLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcclxuICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY29udGV4dFxyXG4gKiBAcmV0dXJucyBOb2RlXHJcbiAqL1xyXG4gZnVuY3Rpb24gcShzZWxlY3RvciwgY29udGV4dCkge1xyXG4gICAgcmV0dXJuIChjb250ZXh0IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERvIHF1ZXJ5U2VsZWN0b3JBbGwuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxyXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50W119IGNvbnRleHRcclxuICogQHJldHVybnMgTm9kZUxpc3RcclxuICovXHJcbiBmdW5jdGlvbiBxYShzZWxlY3RvciwgY29udGV4dCkge1xyXG4gICAgcmV0dXJuIChjb250ZXh0IHx8IGRvY3VtZW50KS5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZhbGlkYXRlIGNvZGUgZnJvbSBjbGllbnQuXHJcbiAqIEByZXR1cm5zIHtib29sZWFufVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVDb2RlKCkge1xyXG4gICAgY29uc3QgY29kZUVsID0gcSgnLmF1dGgtc2NyZWVuIC5jb2RlJyk7XHJcbiAgICBjb25zdCBkaWdpdHMgPSBxYSgnLmF1dGgtc2NyZWVuIC5kaWdpdCBpbnB1dCcpO1xyXG4gICAgbGV0IGNvZGUgPSBcIlwiO1xyXG5cclxuICAgIFtdLmZvckVhY2guY2FsbChkaWdpdHMsIGRpZ2l0ID0+IHtcclxuICAgICAgICBjb2RlICs9IGRpZ2l0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaWYgKGNvZGUubGVuZ3RoID09PSA2KSB7XHJcbiAgICAgICAgaWYgKGNvZGUgPT09ICcwMDAwMDEnKSB7XHJcbiAgICAgICAgICAgIGNvZGVFbC5jbGFzc0xpc3QuYWRkKCd2YWxpZCcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvZGVFbC5jbGFzc0xpc3QuYWRkKCdpbnZhbGlkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5pZiAobG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZignZGV0YWlsJykgPj0gMCkge1xyXG4gICAgY29uc3QgYWR2aWNlcyA9IHFhKCcuYWR2aWNlLmZpeGVkJyk7XHJcblxyXG4gICAgW10uZm9yRWFjaC5jYWxsKGFkdmljZXMsIGFkdmljZSA9PiB7XHJcbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBxKCcuY2xvc2UtYnRuJywgYWR2aWNlKTtcclxuICAgICAgICBhZGRMaXN0ZW5lcignY2xpY2snLCBjbG9zZUJ0biwgKCkgPT4geyBzaG93QWR2aWNlKGFkdmljZSwgZmFsc2UpOyB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgICQoJy5zd2lwZS1idG4nKS5zd2lwZSgpO1xyXG5cclxuICAgIGJpbmQoc2VhcmNoVG9Kc29uKCkpO1xyXG5cclxufSBlbHNlIGlmIChsb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCdhdXRoJykgPj0gMCkge1xyXG4gICAgY29uc3QgZGlnaXRzID0gcWEoJy5hdXRoLXNjcmVlbiAuZGlnaXQgaW5wdXQnKTtcclxuICAgIFxyXG4gICAgYWRkTGlzdGVuZXIoJ2tleXByZXNzIGtleWRvd24ga2V5dXAgaW5wdXQgY2hhbmdlIHBhc3RlJywgZGlnaXRzLCBudW1iZXJGaWx0ZXIpO1xyXG4gICAgYWRkTGlzdGVuZXIoJ2tleXVwJywgZGlnaXRzLCBoYW5kbGVEaWdpdEtleXVwKTtcclxuXHJcbiAgICBkaWdpdHNbMF0uZm9jdXMoKTtcclxuXHJcbn0gZWxzZSB7XHJcblxyXG59XHJcbiIsIihmdW5jdGlvbiAoJCkge1xyXG4gICAgJC5mbi5zd2lwZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxNb3VzZSA9IDA7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZU1vdmVtZW50VG90YWwgPSAwO1xyXG4gICAgICAgICAgICB2YXIgbW91c2VJc0Rvd24gPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlciA9ICR0aGlzLmZpbmQoJy5zbGlkZXInKTtcclxuXHJcbiAgICAgICAgICAgIHNsaWRlci5vbignbW91c2Vkb3duIHRvdWNoc3RhcnQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIG1vdXNlSXNEb3duID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNsaWRlTW92ZW1lbnRUb3RhbCA9ICR0aGlzLndpZHRoKCkgLSAkKHRoaXMpLndpZHRoKCkgKyAxMDtcclxuICAgICAgICAgICAgICAgIGluaXRpYWxNb3VzZSA9IGV2ZW50LmNsaWVudFggfHwgZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VYO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSwgc2xpZGVyKS5vbignbW91c2V1cCB0b3VjaGVuZCcsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtb3VzZUlzRG93bilcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICBtb3VzZUlzRG93biA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRNb3VzZSA9IGV2ZW50LmNsaWVudFggfHwgZXZlbnQuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmVNb3VzZSA9IGN1cnJlbnRNb3VzZSAtIGluaXRpYWxNb3VzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVsYXRpdmVNb3VzZSA8IHNsaWRlTW92ZW1lbnRUb3RhbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJy50ZXh0JykuZmFkZVRvKDMwMCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiBcIi0xMHB4XCJcclxuICAgICAgICAgICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNsaWRlci5hZGRDbGFzcygndW5sb2NrZWQnKTtcclxuICAgICAgICAgICAgICAgICQoJyNsb2NrZXInKS50ZXh0KCdsb2NrX291dGxpbmUnKTtcclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci5vbignY2xpY2sgdGFwJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2xpZGVyLmhhc0NsYXNzKCd1bmxvY2tlZCcpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXIucmVtb3ZlQ2xhc3MoJ3VubG9ja2VkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNsb2NrZXInKS50ZXh0KCdsb2NrX29wZW4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVyLm9mZignY2xpY2sgdGFwJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9LCAwKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLm9uKCdtb3VzZW1vdmUgdG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1vdXNlSXNEb3duKVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE1vdXNlID0gZXZlbnQuY2xpZW50WCB8fCBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVg7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVsYXRpdmVNb3VzZSA9IGN1cnJlbnRNb3VzZSAtIGluaXRpYWxNb3VzZTtcclxuICAgICAgICAgICAgICAgIHZhciBzbGlkZVBlcmNlbnQgPSAxIC0gKHJlbGF0aXZlTW91c2UgLyBzbGlkZU1vdmVtZW50VG90YWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJy5zbGlkZS10ZXh0JykuZmFkZVRvKDAsIHNsaWRlUGVyY2VudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlTW91c2UgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlci5jc3MoeyAnbGVmdCc6ICctMTBweCcgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbGF0aXZlTW91c2UgPj0gc2xpZGVNb3ZlbWVudFRvdGFsICsgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXIuY3NzKHsgJ2xlZnQnOiBzbGlkZU1vdmVtZW50VG90YWwgKyAncHgnIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHNsaWRlci5jc3MoeyAnbGVmdCc6IHJlbGF0aXZlTW91c2UgLSAxMCB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0pKGpRdWVyeSk7XHJcbiJdfQ==

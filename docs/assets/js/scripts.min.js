"use strict";function ownKeys(o,e){var a,t=Object.keys(o);return Object.getOwnPropertySymbols&&(a=Object.getOwnPropertySymbols(o),e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(o,e).enumerable})),t.push.apply(t,a)),t}function _objectSpread(o){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(a),!0).forEach(function(e){_defineProperty(o,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(a)):ownKeys(Object(a)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(a,e))})}return o}function _defineProperty(e,o,a){return o in e?Object.defineProperty(e,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[o]=a,e}var globalIdPelicula,globalImagenPelicula,globalNombrePelicula,globalNumeroCuentaClienteCadenaBaz,globalBotonPago,globalCompras,globalTokenOperacion,globalHeaders,globalGiftCard,globalGiftCardPayment,request={BASE_URL:"https://api.baz.app/superapp",buyMovie:function(e,o,a,t,n){request.send("https://api.baz.app/superapp/diversion/gestion-peliculas/v1/peliculas/"+e+"/compras","POST",o,a,t)},movieById:function(e,o,a){o({resultado:{datosFlujo:{giftCard:{amount:0,amounts:[{precios:"150.00",comision:"3.75",id:"13722"},{precios:"300.00",comision:"7.5",id:"13723"}],commission:"",email:"",id:"",name:"netflix",phone:""},giftCardPayment:{geolocalizacion:{latitud:"19.3093762",longitud:"-99.1872467"},notificacion:{celular:"5540129225",correo:"evelchaher@gmail.com"},token:"",transaccionOperacion:{cuenta:"11561200001040",monto:""}}},headers:{Authorization:"Bearer eyJraWQiOiJKMmhRXC9xbGJyeEYxXC9iazBOa1I3eHd5d1Z1UGE5dmxXTkF3Tm1IYlVhd2s9IiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiI2MmowdjBmOXIxb2tqc2U2cXV2aWNic2RodSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoic3VwZXJhcHAtcHJvZFwvcHJvZCIsImF1dGhfdGltZSI6MTYzMjk0MDU5OCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tXC91cy1lYXN0LTFfQ1JGNHJBNUMwIiwiZXhwIjoxNjMyOTQ0MTk4LCJpYXQiOjE2MzI5NDA1OTgsInZlcnNpb24iOjIsImp0aSI6IjBkOTY2NTA3LWFlNzktNDc5Mi1hMTA5LWQxYTNlY2RiMjY4MSIsImNsaWVudF9pZCI6IjYyajB2MGY5cjFva2pzZTZxdXZpY2JzZGh1In0.ntgDAh0EBohISWvVQ6SxFUOrla6b9HZnddcrUj81HM7MtWNQYePfNN7-M81Kh1XINUYMnwfk5tDD9gfNc7zJ_dofzkxPNvOyJm_KnxlvuXxsrxviEDBapW_tYjB6-mHQrVzcMvgh554aFCc259sxdVV9d54OZP7fTsRhF4IQAfrdCQlUXBtQ9qYcLqJ4ZyyojmcA8XtgXJa2A_jnPutR_5Xrxadv3uoYlgKAFYBBCuzM06jNJzzI-86u9i6aq0rzMwz0OzPfgEURdo6JNEuD6qUO1r3HxAiaYGHX9coivEgEVp40HSmx6fKvgu1BXaDvkLKSYf9FHUtNFRLsBnaf6w","x-sicu":"bd8152d9432a40859cf82dcbd646b689","x-id-interaccion":"3e4fe2e9-7f95-4419-bbe9-5dd95e134f59","x-token-usuario":"f75efdbf2d754bd8108e2da610c1761a","x-token-auth-bearer":"eyJraWQiOiJKMmhRXC9xbGJyeEYxXC9iazBOa1I3eHd5d1Z1UGE5dmxXTkF3Tm1IYlVhd2s9IiwiYWxnIjoiUlMyNTYifQ.eyJzdWIiOiI2MmowdjBmOXIxb2tqc2U2cXV2aWNic2RodSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoic3VwZXJhcHAtcHJvZFwvcHJvZCIsImF1dGhfdGltZSI6MTYzMjk0MDU5OCwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tXC91cy1lYXN0LTFfQ1JGNHJBNUMwIiwiZXhwIjoxNjMyOTQ0MTk4LCJpYXQiOjE2MzI5NDA1OTgsInZlcnNpb24iOjIsImp0aSI6IjBkOTY2NTA3LWFlNzktNDc5Mi1hMTA5LWQxYTNlY2RiMjY4MSIsImNsaWVudF9pZCI6IjYyajB2MGY5cjFva2pzZTZxdXZpY2JzZGh1In0.ntgDAh0EBohISWvVQ6SxFUOrla6b9HZnddcrUj81HM7MtWNQYePfNN7-M81Kh1XINUYMnwfk5tDD9gfNc7zJ_dofzkxPNvOyJm_KnxlvuXxsrxviEDBapW_tYjB6-mHQrVzcMvgh554aFCc259sxdVV9d54OZP7fTsRhF4IQAfrdCQlUXBtQ9qYcLqJ4ZyyojmcA8XtgXJa2A_jnPutR_5Xrxadv3uoYlgKAFYBBCuzM06jNJzzI-86u9i6aq0rzMwz0OzPfgEURdo6JNEuD6qUO1r3HxAiaYGHX9coivEgEVp40HSmx6fKvgu1BXaDvkLKSYf9FHUtNFRLsBnaf6w","x-id-operacion-conciliacion":"hc9xT1lvH0mWwhtjP1dAwQ","x-id-dispositivo":"d20b09f6-dcdb-4981-a2ba-975f34ed500b",accept:"","x-nombre-dispositivo":"","x-sistema-dispositivo":"WEB","x-version-dispositivo":"","x-version-aplicacion":"","x-modelo-dispositivo":"","x-fabricante-dispositivo":"","x-serie-procesador":"","x-operador-telefonia":"","x-latitud":"","x-longitud":"","x-id-lealtad":""},idFlujo:"COMPRA_GIFTCARD"}})},paymentButton:function(e,o,a,t){request.send("https://api.baz.app/integracion/superapp/pagos/captacion/traspasos/v1/boton-pago","POST",e,o,a,t)},payGiftCard:function(e,o,a){},send:function(e,o,a,t,n,i){$.ajax({url:e,method:o,contentType:"application/json",processData:!1,headers:t,data:JSON.stringify(a),success:n,error:i})}};function bind(t){$("[data-id]").each(function(){var e=$(this),o=e.data("id"),a=t[o];"precio"===o?e.html(formatAmount(a)):"saldo"===o?"false"===a&&setTimeout(function(){showAdvice(e,!0)},500):e.html(a)})}function bindFromStr(e){try{bind(JSON.parse(e))}catch(e){console.log(e)}}function changeScreen(e,o){$(".screen").addClass("no-visible"),e.removeClass("no-visible"),"function"==typeof o&&o()}function formatAmount(e){return"$ "+Number(e).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")}function handleDigitKeyup(e){var o=e.target,a=e.keyCode,t=$(o.parentNode);8===a?0<t.prev().length&&((e=t.prev().find("input")).val(""),e.focus()):47<a&&a<58&&""!==o.value&&0<t.next().length&&t.next().find("input").focus(),validateCode()}function numberFilter(e){/^\d{0,1}$/.test(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""}function fakeRequest(e,o){setTimeout(function(){o("000001"===e)},1500)}function searchToJson(){for(var e,o=location.search.substring(1).split("&"),a={},t=0;t<o.length;t++)""!==o[t]&&(e=o[t].split("="),a[decodeURIComponent(e[0])]=decodeURIComponent(e[1]));return a}function showAdvice(e,o){o?e.addClass("no-visible"):e.removeClass("no-visible")}function showLoader(e){var o=$(".loader");e?(o.length<=0&&(o=$('<div class="loader">')),$("body").append(o),setTimeout(function(){return o.addClass("loader-visible")},10)):(o.removeClass("loader-visible"),setTimeout(function(){return o.remove()},375))}function showErrorScreen(e,o,a){var t=e.responseJSON,e=t.folio,t=t.mensaje;$(".error-screen").find('[data-id="mensaje"]').text(t),$(".error-screen").find('[data-id="folio"]').text(e),changeScreen($(".error-screen")),showLoader(!1)}function validateCode(){var o=$(".auth-screen .code"),a=$(".auth-screen .digit input"),e="";a.each(function(){e+=this.value}),6===e.length?(showLoader(!0),fakeRequest(e,function(e){e?(o.addClass("valid"),changeScreen($(".resume-screen"),function(){showLoader(!1)})):(showLoader(!1),o.addClass("invalid"),setTimeout(function(){a.each(function(){$(this).val("")}),a.eq(0).focus()},100))})):o.removeClass("valid invalid")}var searchJson=searchToJson();showLoader(!0),request.movieById(searchJson.id,function(e){console.log("%o",e);var o,a,t=e.resultado,n=t.datosFlujo,i=t.headers,r=t.idFlujo;globalHeaders=i,"COMPRA_GIFTCARD"===r?(o=n.giftCard,a=n.giftCardPayment,globalGiftCard=o,globalGiftCardPayment=a,$(".gitCard-amout").find('[data-id="nombre"]').text(globalGiftCard.name),$(".gitCard-amout").find('[data-id="montos"]').empty(),globalGiftCard.amounts.forEach(function(e){var o=document.createElement("option");o.setAttribute("value",e.id),o.innerText=formatAmount(e.precios),o.obj=e,o.classList.add("colorPrice"),$(".gitCard-amout").find('[data-id="montos"]').append(o)}),changeScreen($(".gitCard-amout"))):(e=n.idPelicula,t=n.imagenPelicula,i=n.nombrePelicula,r=n.numeroCuentaClienteCadenaBaz,o=n.botonPago,a=n.compras,n=n.tokenOperacion,globalIdPelicula=e,globalImagenPelicula=t,globalNombrePelicula=i,globalNumeroCuentaClienteCadenaBaz=r,globalBotonPago=o.transaccion,globalCompras=a.transaccion,globalTokenOperacion=n,$(".detail-screen").find('[data-id="nombre"]').text(globalNombrePelicula),$(".detail-screen").find('[data-id="precio"]').text(formatAmount(globalBotonPago.detallePago.montoEnvio)),$(".detail-screen").find('[data-id="tarjeta"]').text(globalNumeroCuentaClienteCadenaBaz),changeScreen($(".detail-screen"))),showLoader(!1)},showErrorScreen);var $advices=$(".advice.fixed");$advices.each(function(){var e=$(this);e.find(".close-btn").on("click",function(){showAdvice(e,!1)})}),$(".rent-button").on("click",function(){console.log("scripts.js: Click rent button.");var e=_objectSpread({},globalHeaders),n=_objectSpread({},globalHeaders);delete n["x-id-operacion-conciliacion"],showLoader(!0),request.paymentButton({transaccion:_objectSpread(_objectSpread({},globalBotonPago),{},{tokenOperacion:globalTokenOperacion})},e,function(e){console.log("scripts.js: Payment button. %o",e);var o=e.resultado,a=o.fechaOperacion,t=o.horaOperacion;request.buyMovie(globalIdPelicula,{transaccion:_objectSpread(_objectSpread({},globalCompras),{},{fechaOperacion:e.resultado.fechaOperacion,numeroMovimiento:e.resultado.numeroMovimiento})},n,function(e){console.log("scripts.js: Buy movie. %o",e);e=e.folio;$(".resume-screen").find('[data-id="fecha"]').text("".concat(a,", ").concat(t)),$(".resume-screen").find('[data-id="precio"]').text(formatAmount(globalBotonPago.detallePago.montoEnvio)),$(".resume-screen").find('[data-id="tarjeta"]').text(globalNumeroCuentaClienteCadenaBaz),$(".resume-screen").find('[data-id="nombre"]').text(globalNombrePelicula),$(".resume-screen").find('[data-id="precio"]').text(formatAmount(globalBotonPago.detallePago.montoEnvio)),$(".resume-screen").find('[data-id="folio"]').text(e),changeScreen($(".resume-screen")),showLoader(!1)},showErrorScreen)},showErrorScreen)});var $digits=$(".auth-screen .digit input");$digits.on("keypress keydown keyup input change paste",numberFilter),$digits.on("keyup",handleDigitKeyup),$digits.eq(0).focus(),$(".share-btn").on("click",function(){console.log("scripts.js: Sharing ticket")}),$(".movie-btn").on("click",function(){console.log("scripts.js: Go to movie button click."),$(".success-screen").find('[data-id="nombre"]').text(globalNombrePelicula),$(".success-screen").find(".see-movie-href").attr("href","intent://?verPelicula?data=".concat(btoa(globalIdPelicula),"#Intent;scheme=sappdl;action=android.intent.action.VIEW;S.browser_fallback_url=https%3A%2F%2Fplay.google.com/store/apps/details?id=mx.app.baz.superapp;end")),globalImagenPelicula&&$('<img src="'.concat(globalImagenPelicula,'">')).on("load",function(){$(".success-screen").find('[data-id="imagen"]').attr("style","background-image: url(".concat(globalImagenPelicula,")")).addClass("displayed")}),changeScreen($(".success-screen"))});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlcXVlc3QuanMiLCJzY3JpcHRzLmpzIl0sIm5hbWVzIjpbImdsb2JhbElkUGVsaWN1bGEiLCJnbG9iYWxJbWFnZW5QZWxpY3VsYSIsImdsb2JhbE5vbWJyZVBlbGljdWxhIiwiZ2xvYmFsTnVtZXJvQ3VlbnRhQ2xpZW50ZUNhZGVuYUJheiIsImdsb2JhbEJvdG9uUGFnbyIsImdsb2JhbENvbXByYXMiLCJnbG9iYWxUb2tlbk9wZXJhY2lvbiIsImdsb2JhbEhlYWRlcnMiLCJnbG9iYWxHaWZ0Q2FyZCIsImdsb2JhbEdpZnRDYXJkUGF5bWVudCIsInJlcXVlc3QiLCJCQVNFX1VSTCIsImJ1eU1vdmllIiwiaWRNb3ZpZSIsImJvZHkiLCJoZWFkZXJzIiwic3VjY2VzcyIsImVycm9yIiwic2VuZCIsIm1vdmllQnlJZCIsImlkT3BlcmF0aW9uIiwicmVzdWx0YWRvIiwiZGF0b3NGbHVqbyIsImdpZnRDYXJkIiwiYW1vdW50IiwiYW1vdW50cyIsInByZWNpb3MiLCJjb21pc2lvbiIsImlkIiwiY29tbWlzc2lvbiIsImVtYWlsIiwibmFtZSIsInBob25lIiwiZ2lmdENhcmRQYXltZW50IiwiZ2VvbG9jYWxpemFjaW9uIiwibGF0aXR1ZCIsImxvbmdpdHVkIiwibm90aWZpY2FjaW9uIiwiY2VsdWxhciIsImNvcnJlbyIsInRva2VuIiwidHJhbnNhY2Npb25PcGVyYWNpb24iLCJjdWVudGEiLCJtb250byIsIkF1dGhvcml6YXRpb24iLCJ4LXNpY3UiLCJ4LWlkLWludGVyYWNjaW9uIiwieC10b2tlbi11c3VhcmlvIiwieC10b2tlbi1hdXRoLWJlYXJlciIsIngtaWQtb3BlcmFjaW9uLWNvbmNpbGlhY2lvbiIsIngtaWQtZGlzcG9zaXRpdm8iLCJhY2NlcHQiLCJ4LW5vbWJyZS1kaXNwb3NpdGl2byIsIngtc2lzdGVtYS1kaXNwb3NpdGl2byIsIngtdmVyc2lvbi1kaXNwb3NpdGl2byIsIngtdmVyc2lvbi1hcGxpY2FjaW9uIiwieC1tb2RlbG8tZGlzcG9zaXRpdm8iLCJ4LWZhYnJpY2FudGUtZGlzcG9zaXRpdm8iLCJ4LXNlcmllLXByb2Nlc2Fkb3IiLCJ4LW9wZXJhZG9yLXRlbGVmb25pYSIsIngtbGF0aXR1ZCIsIngtbG9uZ2l0dWQiLCJ4LWlkLWxlYWx0YWQiLCJpZEZsdWpvIiwicGF5bWVudEJ1dHRvbiIsInBheUdpZnRDYXJkIiwidXJsIiwibWV0aG9kIiwianNvbkhlYWRlcnMiLCIkIiwiYWpheCIsImNvbnRlbnRUeXBlIiwicHJvY2Vzc0RhdGEiLCJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImJpbmQiLCJ2YWx1ZXMiLCJlYWNoIiwiJHRhZyIsInRoaXMiLCJ2YWx1ZSIsImh0bWwiLCJmb3JtYXRBbW91bnQiLCJzZXRUaW1lb3V0Iiwic2hvd0FkdmljZSIsImJpbmRGcm9tU3RyIiwic3RySnNvbiIsInBhcnNlIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNoYW5nZVNjcmVlbiIsIiRzY3JlZW4iLCJjYWxsYmFjayIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwicmVwbGFjZSIsImhhbmRsZURpZ2l0S2V5dXAiLCJfcmVmIiwidGFyZ2V0Iiwia2V5Q29kZSIsIiRwYXJlbnQiLCJwYXJlbnROb2RlIiwicHJldiIsImxlbmd0aCIsIiRpbnB1dCIsImZpbmQiLCJ2YWwiLCJmb2N1cyIsIm5leHQiLCJ2YWxpZGF0ZUNvZGUiLCJudW1iZXJGaWx0ZXIiLCJldmVudCIsInRlc3QiLCJvbGRWYWx1ZSIsIm9sZFNlbGVjdGlvblN0YXJ0Iiwic2VsZWN0aW9uU3RhcnQiLCJvbGRTZWxlY3Rpb25FbmQiLCJzZWxlY3Rpb25FbmQiLCJoYXNPd25Qcm9wZXJ0eSIsInNldFNlbGVjdGlvblJhbmdlIiwiZmFrZVJlcXVlc3QiLCJjb2RlIiwic2VhcmNoVG9Kc29uIiwicGFydHMiLCJwYWlycyIsImxvY2F0aW9uIiwic2VhcmNoIiwic3Vic3RyaW5nIiwic3BsaXQiLCJvYmplY3QiLCJpIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiJGVsIiwiZmxhZyIsInNob3dMb2FkZXIiLCJzaG93IiwiJGxvYWRlciIsImFwcGVuZCIsInJlbW92ZSIsInNob3dFcnJvclNjcmVlbiIsImpxWEhSIiwidGV4dFN0YXR1cyIsImVycm9yVGhyb3duIiwiX2pxWEhSJHJlc3BvbnNlSlNPTiIsInJlc3BvbnNlSlNPTiIsImZvbGlvIiwibWVuc2FqZSIsInRleHQiLCIkY29kZSIsIiRkaWdpdHMiLCJlcSIsInNlYXJjaEpzb24iLCJib3RvblBhZ28iLCJjb21wcmFzIiwiX2RhdGEkcmVzdWx0YWRvIiwiZW1wdHkiLCJmb3JFYWNoIiwib3B0aW9uRWwiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJpbm5lclRleHQiLCJvYmoiLCJjbGFzc0xpc3QiLCJhZGQiLCJpZFBlbGljdWxhIiwiaW1hZ2VuUGVsaWN1bGEiLCJub21icmVQZWxpY3VsYSIsIm51bWVyb0N1ZW50YUNsaWVudGVDYWRlbmFCYXoiLCJ0b2tlbk9wZXJhY2lvbiIsInRyYW5zYWNjaW9uIiwiZGV0YWxsZVBhZ28iLCJtb250b0VudmlvIiwiJGFkdmljZXMiLCIkYWR2aWNlIiwib24iLCJwYXltZW50QnV0dG9uSGVhZGVycyIsIl9vYmplY3RTcHJlYWQiLCJidXlNb3ZpZUhlYWRlcnMiLCJfZGF0YSRyZXN1bHRhZG8yIiwiZmVjaGFPcGVyYWNpb24iLCJob3JhT3BlcmFjaW9uIiwibnVtZXJvTW92aW1pZW50byIsImNvbmNhdCIsImF0dHIiLCJidG9hIl0sIm1hcHBpbmdzIjoicXZCQUFBLElDQUFBLGlCQUNBQyxxQkFDQUMscUJBQ0FDLG1DQUNBQyxnQkFDQUMsY0FDQUMscUJBQ0FDLGNBQ0FDLGVBQ0FDLHNCRFRBQyxRQUFBLENBR0FDLFNBQUEsK0JBVUFDLFNBQUEsU0FBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FHQVAsUUFBQVEsS0FEQSx5RUFBQUwsRUFBQSxXQUNBLE9BQUFDLEVBQUFDLEVBQUFDLElBT0FHLFVBQUEsU0FBQUMsRUFBQUosRUFBQUMsR0FTQUQsRUFBQSxDQUNBSyxVQUFBLENBQ0FDLFdBQUEsQ0FDQUMsU0FBQSxDQUNBQyxPQUFBLEVBQ0FDLFFBQUEsQ0FDQSxDQUNBQyxRQUFBLFNBQ0FDLFNBQUEsT0FDQUMsR0FBQSxTQUVBLENBQ0FGLFFBQUEsU0FDQUMsU0FBQSxNQUNBQyxHQUFBLFVBR0FDLFdBQUEsR0FDQUMsTUFBQSxHQUNBRixHQUFBLEdBQ0FHLEtBQUEsVUFDQUMsTUFBQSxJQUVBQyxnQkFBQSxDQUNBQyxnQkFBQSxDQUNBQyxRQUFBLGFBQ0FDLFNBQUEsZUFFQUMsYUFBQSxDQUNBQyxRQUFBLGFBQ0FDLE9BQUEsd0JBRUFDLE1BQUEsR0FDQUMscUJBQUEsQ0FDQUMsT0FBQSxpQkFDQUMsTUFBQSxNQUlBNUIsUUFBQSxDQUNBNkIsY0FBQSx1MkJBQ0FDLFNBQUEsbUNBQ0FDLG1CQUFBLHVDQUNBQyxrQkFBQSxtQ0FDQUMsc0JBQUEsZzJCQUNBQyw4QkFBQSx5QkFDQUMsbUJBQUEsdUNBQ0FDLE9BQUEsR0FDQUMsdUJBQUEsR0FDQUMsd0JBQUEsTUFDQUMsd0JBQUEsR0FDQUMsdUJBQUEsR0FDQUMsdUJBQUEsR0FDQUMsMkJBQUEsR0FDQUMscUJBQUEsR0FDQUMsdUJBQUEsR0FDQUMsWUFBQSxHQUNBQyxhQUFBLEdBQ0FDLGVBQUEsSUFFQUMsUUFBQSxzQkFhQUMsY0FBQSxTQUFBbEQsRUFBQUMsRUFBQUMsRUFBQUMsR0FHQVAsUUFBQVEsS0FEQSxtRkFDQSxPQUFBSixFQUFBQyxFQUFBQyxFQUFBQyxJQVNBZ0QsWUFBQSxTQUFBN0MsRUFBQUosRUFBQUMsS0FjQUMsS0FBQSxTQUFBZ0QsRUFBQUMsRUFBQXJELEVBQUFzRCxFQUFBcEQsRUFBQUMsR0FDQW9ELEVBQUFDLEtBQUEsQ0FDQUosSUFBQUEsRUFDQUMsT0FBQUEsRUFDQUksWUFBQSxtQkFDQUMsYUFBQSxFQUNBekQsUUFBQXFELEVBQ0FLLEtBQUFDLEtBQUFDLFVBQUE3RCxHQUNBRSxRQUFBQSxFQUNBQyxNQUFBQSxNQzdIQSxTQUFBMkQsS0FBQUMsR0FDQVIsRUFBQSxhQUVBUyxLQUFBLFdBQ0EsSUFBQUMsRUFBQVYsRUFBQVcsTUFDQXBELEVBQUFtRCxFQUFBTixLQUFBLE1BQ0FRLEVBQUFKLEVBQUFqRCxHQUVBLFdBQUFBLEVBQ0FtRCxFQUFBRyxLQUFBQyxhQUFBRixJQUNBLFVBQUFyRCxFQUNBLFVBQUFxRCxHQUNBRyxXQUFBLFdBQUFDLFdBQUFOLEdBQUEsSUFBQSxLQUdBQSxFQUFBRyxLQUFBRCxLQVNBLFNBQUFLLFlBQUFDLEdBQ0EsSUFFQVgsS0FEQUYsS0FBQWMsTUFBQUQsSUFFQSxNQUFBRSxHQUNBQyxRQUFBQyxJQUFBRixJQVNBLFNBQUFHLGFBQUFDLEVBQUFDLEdBQ0F6QixFQUFBLFdBQUEwQixTQUFBLGNBQ0FGLEVBQUFHLFlBQUEsY0FFQSxtQkFBQUYsR0FBQUEsSUFRQSxTQUFBWCxhQUFBM0QsR0FDQSxNQUFBLEtBQUF5RSxPQUFBekUsR0FBQTBFLFFBQUEsR0FBQUMsUUFBQSx3QkFBQSxLQU9BLFNBQUFDLGlCQUFBQyxHQUFBLElBQUFDLEVBQUFELEVBQUFDLE9BQUFDLEVBQUFGLEVBQUFFLFFBQ0FDLEVBQUFuQyxFQUFBaUMsRUFBQUcsWUFFQSxJQUFBRixFQUNBLEVBQUFDLEVBQUFFLE9BQUFDLFVBQ0FDLEVBQUFKLEVBQUFFLE9BQUFHLEtBQUEsVUFFQUMsSUFBQSxJQUNBRixFQUFBRyxTQUVBLEdBQUFSLEdBQUFBLEVBQUEsSUFDQSxLQUFBRCxFQUFBckIsT0FDQSxFQUFBdUIsRUFBQVEsT0FBQUwsUUFDQUgsRUFBQVEsT0FBQUgsS0FBQSxTQUNBRSxRQUtBRSxlQU9BLFNBQUFDLGFBQUFDLEdBQ0EsWUFFQUMsS0FBQXBDLEtBQUFDLFFBQ0FELEtBQUFxQyxTQUFBckMsS0FBQUMsTUFDQUQsS0FBQXNDLGtCQUFBdEMsS0FBQXVDLGVBQ0F2QyxLQUFBd0MsZ0JBQUF4QyxLQUFBeUMsY0FDQXpDLEtBQUEwQyxlQUFBLGFBQ0ExQyxLQUFBQyxNQUFBRCxLQUFBcUMsU0FDQXJDLEtBQUEyQyxrQkFBQTNDLEtBQUFzQyxrQkFBQXRDLEtBQUF3QyxrQkFFQXhDLEtBQUFDLE1BQUEsR0FRQSxTQUFBMkMsWUFBQUMsRUFBQS9CLEdBQ0FWLFdBQUEsV0FBQVUsRUFBQSxXQUFBK0IsSUFBQSxNQU9BLFNBQUFDLGVBS0EsSUFKQSxJQU9BQyxFQVBBQyxFQUFBQyxTQUFBQyxPQUFBQyxVQUFBLEdBQUFDLE1BQUEsS0FDQUMsRUFBQSxHQUNBQyxFQUFBLEVBRUFBLEVBQUFOLEVBQUFyQixPQUFBMkIsSUFDQSxLQUFBTixFQUFBTSxLQUVBUCxFQUFBQyxFQUFBTSxHQUFBRixNQUFBLEtBQ0FDLEVBQUFFLG1CQUFBUixFQUFBLEtBQUFRLG1CQUFBUixFQUFBLEtBR0EsT0FBQU0sRUFRQSxTQUFBaEQsV0FBQW1ELEVBQUFDLEdBQ0FBLEVBQ0FELEVBQUF6QyxTQUFBLGNBRUF5QyxFQUFBeEMsWUFBQSxjQVFBLFNBQUEwQyxXQUFBQyxHQUNBLElBQUFDLEVBQUF2RSxFQUFBLFdBRUFzRSxHQUNBQyxFQUFBakMsUUFBQSxJQUNBaUMsRUFBQXZFLEVBQUEseUJBR0FBLEVBQUEsUUFBQXdFLE9BQUFELEdBQ0F4RCxXQUFBLFdBQUEsT0FBQXdELEVBQUE3QyxTQUFBLG1CQUFBLE1BRUE2QyxFQUFBNUMsWUFBQSxrQkFDQVosV0FBQSxXQUFBLE9BQUF3RCxFQUFBRSxVQUFBLE1BVUEsU0FBQUMsZ0JBQUFDLEVBQUFDLEVBQUFDLEdBQ0EsSUFBQUMsRUFBQUgsRUFBQUksYUFBQUMsRUFBQUYsRUFBQUUsTUFBQUMsRUFBQUgsRUFBQUcsUUFFQWpGLEVBQUEsaUJBQUF3QyxLQUFBLHVCQUFBMEMsS0FBQUQsR0FDQWpGLEVBQUEsaUJBQUF3QyxLQUFBLHFCQUFBMEMsS0FBQUYsR0FFQXpELGFBQUF2QixFQUFBLGtCQUNBcUUsWUFBQSxHQU9BLFNBQUF6QixlQUNBLElBQUF1QyxFQUFBbkYsRUFBQSxzQkFDQW9GLEVBQUFwRixFQUFBLDZCQUNBd0QsRUFBQSxHQUVBNEIsRUFBQTNFLEtBQUEsV0FDQStDLEdBQUE3QyxLQUFBQyxRQUdBLElBQUE0QyxFQUFBbEIsUUFDQStCLFlBQUEsR0FFQWQsWUFBQUMsRUFBQSxTQUFBN0csR0FDQUEsR0FDQXdJLEVBQUF6RCxTQUFBLFNBRUFILGFBQUF2QixFQUFBLGtCQUFBLFdBQ0FxRSxZQUFBLE9BR0FBLFlBQUEsR0FDQWMsRUFBQXpELFNBQUEsV0FFQVgsV0FBQSxXQUNBcUUsRUFBQTNFLEtBQUEsV0FDQVQsRUFBQVcsTUFBQThCLElBQUEsTUFFQTJDLEVBQUFDLEdBQUEsR0FBQTNDLFNBQ0EsU0FJQXlDLEVBQUF4RCxZQUFBLGlCQUtBLElBQUEyRCxXQUFBN0IsZUFFQVksWUFBQSxHQUNBaEksUUFBQVMsVUFDQXdJLFdBQUEsR0FDQSxTQUFBbEYsR0FDQWlCLFFBQUFDLElBQUEsS0FBQWxCLEdBRUEsSUEyQkFtRixFQUFBQyxFQTNCQUMsRUFBQXJGLEVBQUFwRCxVQUFBQyxFQUFBd0ksRUFBQXhJLFdBQUFQLEVBQUErSSxFQUFBL0ksUUFBQWdELEVBQUErRixFQUFBL0YsUUFFQXhELGNBQUFRLEVBRUEsb0JBQUFnRCxHQUNBeEMsRUFBQUQsRUFBQUMsU0FBQVUsRUFBQVgsRUFBQVcsZ0JBRUF6QixlQUFBZSxFQUNBZCxzQkFBQXdCLEVBRUFvQyxFQUFBLGtCQUFBd0MsS0FBQSxzQkFBQTBDLEtBQUEvSSxlQUFBdUIsTUFDQXNDLEVBQUEsa0JBQUF3QyxLQUFBLHNCQUFBa0QsUUFFQXZKLGVBQUFpQixRQUFBdUksUUFBQSxTQUFBeEksR0FDQSxJQUFBeUksRUFBQUMsU0FBQUMsY0FBQSxVQUVBRixFQUFBRyxhQUFBLFFBQUE1SSxFQUFBSSxJQUNBcUksRUFBQUksVUFBQWxGLGFBQUEzRCxFQUFBRSxTQUNBdUksRUFBQUssSUFBQTlJLEVBQ0F5SSxFQUFBTSxVQUFBQyxJQUFBLGNBRUFuRyxFQUFBLGtCQUFBd0MsS0FBQSxzQkFBQWdDLE9BQUFvQixLQUlBckUsYUFBQXZCLEVBQUEscUJBRUFvRyxFQUFBbkosRUFBQW1KLFdBQUFDLEVBQUFwSixFQUFBb0osZUFBQUMsRUFBQXJKLEVBQUFxSixlQUFBQyxFQUFBdEosRUFBQXNKLDZCQUFBaEIsRUFBQXRJLEVBQUFzSSxVQUFBQyxFQUFBdkksRUFBQXVJLFFBQUFnQixFQUFBdkosRUFBQXVKLGVBRUE3SyxpQkFBQXlLLEVBQ0F4SyxxQkFBQXlLLEVBQ0F4SyxxQkFBQXlLLEVBQ0F4SyxtQ0FBQXlLLEVBQ0F4SyxnQkFBQXdKLEVBQUFrQixZQUNBekssY0FBQXdKLEVBQUFpQixZQUNBeEsscUJBQUF1SyxFQUdBeEcsRUFBQSxrQkFBQXdDLEtBQUEsc0JBQUEwQyxLQUFBckosc0JBQ0FtRSxFQUFBLGtCQUFBd0MsS0FBQSxzQkFBQTBDLEtBQUFwRSxhQUFBL0UsZ0JBQUEySyxZQUFBQyxhQUNBM0csRUFBQSxrQkFBQXdDLEtBQUEsdUJBQUEwQyxLQUFBcEosb0NBRUF5RixhQUFBdkIsRUFBQSxvQkFHQXFFLFlBQUEsSUFFQUssaUJBR0EsSUFBQWtDLFNBQUE1RyxFQUFBLGlCQUNBNEcsU0FBQW5HLEtBQUEsV0FDQSxJQUFBb0csRUFBQTdHLEVBQUFXLE1BQ0FrRyxFQUFBckUsS0FBQSxjQUVBc0UsR0FBQSxRQUFBLFdBQ0E5RixXQUFBNkYsR0FBQSxPQUlBN0csRUFBQSxnQkFBQThHLEdBQUEsUUFBQSxXQUNBekYsUUFBQUMsSUFBQSxrQ0FFQSxJQUFBeUYsRUFBQUMsY0FBQSxHQUFBOUssZUFDQStLLEVBQUFELGNBQUEsR0FBQTlLLHNCQUVBK0ssRUFBQSwrQkFFQTVDLFlBQUEsR0FDQWhJLFFBQUFzRCxjQUFBLENBQUE4RyxZQUFBTyxjQUFBQSxjQUFBLEdBQUFqTCxpQkFBQSxHQUFBLENBQUF5SyxlQUFBdkssd0JBQUE4SyxFQUFBLFNBQUEzRyxHQUNBaUIsUUFBQUMsSUFBQSxpQ0FBQWxCLEdBRUEsSUFBQThHLEVBQUE5RyxFQUFBcEQsVUFBQW1LLEVBQUFELEVBQUFDLGVBQUFDLEVBQUFGLEVBQUFFLGNBRUEvSyxRQUFBRSxTQUFBWixpQkFBQSxDQUFBOEssWUFBQU8sY0FBQUEsY0FBQSxHQUFBaEwsZUFBQSxHQUFBLENBQUFtTCxlQUFBL0csRUFBQXBELFVBQUFtSyxlQUFBRSxpQkFBQWpILEVBQUFwRCxVQUFBcUssb0JBQUFKLEVBQUEsU0FBQTdHLEdBQ0FpQixRQUFBQyxJQUFBLDRCQUFBbEIsR0FFQTRFLEVBQUE1RSxFQUFBNEUsTUFHQWhGLEVBQUEsa0JBQUF3QyxLQUFBLHFCQUFBMEMsS0FBQSxHQUFBb0MsT0FBQUgsRUFBQSxNQUFBRyxPQUFBRixJQUNBcEgsRUFBQSxrQkFBQXdDLEtBQUEsc0JBQUEwQyxLQUFBcEUsYUFBQS9FLGdCQUFBMkssWUFBQUMsYUFDQTNHLEVBQUEsa0JBQUF3QyxLQUFBLHVCQUFBMEMsS0FBQXBKLG9DQUNBa0UsRUFBQSxrQkFBQXdDLEtBQUEsc0JBQUEwQyxLQUFBckosc0JBQ0FtRSxFQUFBLGtCQUFBd0MsS0FBQSxzQkFBQTBDLEtBQUFwRSxhQUFBL0UsZ0JBQUEySyxZQUFBQyxhQUNBM0csRUFBQSxrQkFBQXdDLEtBQUEscUJBQUEwQyxLQUFBRixHQUVBekQsYUFBQXZCLEVBQUEsbUJBQ0FxRSxZQUFBLElBRUFLLGtCQUdBQSxtQkFLQSxJQUFBVSxRQUFBcEYsRUFBQSw2QkFFQW9GLFFBQUEwQixHQUFBLDRDQUFBakUsY0FDQXVDLFFBQUEwQixHQUFBLFFBQUEvRSxrQkFFQXFELFFBQUFDLEdBQUEsR0FBQTNDLFFBR0ExQyxFQUFBLGNBQUE4RyxHQUFBLFFBQUEsV0FDQXpGLFFBQUFDLElBQUEsZ0NBSUF0QixFQUFBLGNBQUE4RyxHQUFBLFFBQUEsV0FDQXpGLFFBQUFDLElBQUEseUNBRUF0QixFQUFBLG1CQUFBd0MsS0FBQSxzQkFBQTBDLEtBQUFySixzQkFDQW1FLEVBQUEsbUJBQUF3QyxLQUFBLG1CQUFBK0UsS0FBQSxPQUFBLDhCQUFBRCxPQUFBRSxLQUFBN0wsa0JBQUEsK0pBR0FDLHNCQUNBb0UsRUFBQSxhQUFBc0gsT0FBQTFMLHFCQUFBLE9BQUFrTCxHQUFBLE9BQUEsV0FDQTlHLEVBQUEsbUJBQUF3QyxLQUFBLHNCQUFBK0UsS0FBQSxRQUFBLHlCQUFBRCxPQUFBMUwscUJBQUEsTUFBQThGLFNBQUEsZUFJQUgsYUFBQXZCLEVBQUEiLCJmaWxlIjoic2NyaXB0cy5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZXF1ZXN0ID0ge1xyXG5cclxuICAgIC8vIEJBU0VfVVJMOiAnaHR0cHM6Ly9hcGlnYXRld2F5LnN1cGVyYXBwYmF6LmNvbS9pbnRlZ3JhY2lvbi9zdXBlcmFwcCcsIC8vIERldlxyXG4gICAgQkFTRV9VUkw6ICdodHRwczovL2FwaS5iYXouYXBwL3N1cGVyYXBwJywgLy8gUHJvZFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWFrZSBhIHBheW1lbnQuXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWRNb3ZpZSBcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBib2R5IFxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGhlYWRlcnMgXHJcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBzdWNjZXNzIFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZXJyb3IgXHJcbiAgICAgKi9cclxuICAgIGJ1eU1vdmllOiBmdW5jdGlvbiAoaWRNb3ZpZSwgYm9keSwgaGVhZGVycywgc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAvLyBjb25zdCB1cmwgPSAnaHR0cHM6Ly9hcGlnYXRld2F5LnN1cGVyYXBwYmF6LmNvbS9pbnRlZ3JhY2lvbi9zdXBlcmFwcC9kaXZlcnNpb24vZ2VzdGlvbi1wZWxpY3VsYXMvdjEvcGVsaWN1bGFzLycgKyBpZE1vdmllICsgJy9jb21wcmFzJztcclxuICAgICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9hcGkuYmF6LmFwcC9zdXBlcmFwcC9kaXZlcnNpb24vZ2VzdGlvbi1wZWxpY3VsYXMvdjEvcGVsaWN1bGFzLycgKyBpZE1vdmllICsgJy9jb21wcmFzJztcclxuICAgICAgICByZXF1ZXN0LnNlbmQodXJsLCAnUE9TVCcsIGJvZHksIGhlYWRlcnMsIHN1Y2Nlc3MpXHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IG1vdmllIGJ5IGlkIG9wZXJhdGlvbi5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBpZE9wZXJhdGlvbiBcclxuICAgICAqL1xyXG4gICAgbW92aWVCeUlkOiBmdW5jdGlvbihpZE9wZXJhdGlvbiwgc3VjY2VzcywgZXJyb3IpIHtcclxuICAgICAgICAvLyBjb25zdCB1cmwgPSAnaHR0cHM6Ly9hcGlnYXRld2F5LnN1cGVyYXBwYmF6LmNvbS9pbnRlZ3JhY2lvbi9zdXBlcmFwcC9jYW5hbC9jbGllbnRlcy9nZXN0aW9uLXNlc2lvbmVzL3YxL3BvcnRhbC9vcGVyYWNpb25lcy8nICsgaWRPcGVyYXRpb247XHJcbiAgICAgICAgLyogY29uc3QgdXJsID0gJ2h0dHBzOi8vYXBpLmJhei5hcHAvc3VwZXJhcHAvY2FuYWwvY2xpZW50ZXMvZ2VzdGlvbi1zZXNpb25lcy92MS9wb3J0YWwvb3BlcmFjaW9uZXMvJyArIGlkT3BlcmF0aW9uO1xyXG4gICAgICAgIHJlcXVlc3Quc2VuZCh1cmwsICdHRVQnLCB1bmRlZmluZWQsIHtcclxuICAgICAgICAgICAgJ3gtc2ljdSc6ICczYmFkMTI5MGFjNDYwMGE1NjkxNjJlZmFhMDkxMTdlYScsXHJcbiAgICAgICAgICAgICd4LWlkLWludGVyYWNjaW9uJzogJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjY1NTQ0MDAwMCcsXHJcbiAgICAgICAgICAgICd4LXRva2VuLXVzdWFyaW8nOiAnU1JmVlpyVFl2ZG03bXp6Wm1jdWlEVmlBQ2tBeCdcclxuICAgICAgICB9LCBzdWNjZXNzLCBlcnJvcik7ICovXHJcblxyXG4gICAgICAgIHN1Y2Nlc3Moe1xyXG4gICAgICAgICAgICBcInJlc3VsdGFkb1wiOiB7XHJcbiAgICAgICAgICAgICAgXCJkYXRvc0ZsdWpvXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZ2lmdENhcmRcIjoge1xyXG4gICAgICAgICAgICAgICAgICBcImFtb3VudFwiOiAwLFxyXG4gICAgICAgICAgICAgICAgICBcImFtb3VudHNcIjogW1xyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgIFwicHJlY2lvc1wiOiBcIjE1MC4wMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgXCJjb21pc2lvblwiOiBcIjMuNzVcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCIxMzcyMlwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICBcInByZWNpb3NcIjogXCIzMDAuMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiY29taXNpb25cIjogXCI3LjVcIixcclxuICAgICAgICAgICAgICAgICAgICAgIFwiaWRcIjogXCIxMzcyM1wiXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICBdLFxyXG4gICAgICAgICAgICAgICAgICBcImNvbW1pc3Npb25cIjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgXCJlbWFpbFwiOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICBcImlkXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBcIm5ldGZsaXhcIixcclxuICAgICAgICAgICAgICAgICAgXCJwaG9uZVwiOiBcIlwiXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJnaWZ0Q2FyZFBheW1lbnRcIjoge1xyXG4gICAgICAgICAgICAgICAgICBcImdlb2xvY2FsaXphY2lvblwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJsYXRpdHVkXCI6IFwiMTkuMzA5Mzc2MlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibG9uZ2l0dWRcIjogXCItOTkuMTg3MjQ2N1wiXHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIFwibm90aWZpY2FjaW9uXCI6IHtcclxuICAgICAgICAgICAgICAgICAgICBcImNlbHVsYXJcIjogXCI1NTQwMTI5MjI1XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJjb3JyZW9cIjogXCJldmVsY2hhaGVyQGdtYWlsLmNvbVwiXHJcbiAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgIFwidG9rZW5cIjogXCJcIixcclxuICAgICAgICAgICAgICAgICAgXCJ0cmFuc2FjY2lvbk9wZXJhY2lvblwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJjdWVudGFcIjogXCIxMTU2MTIwMDAwMTA0MFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibW9udG9cIjogXCJcIlxyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICBcImhlYWRlcnNcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJBdXRob3JpemF0aW9uXCI6IFwiQmVhcmVyIGV5SnJhV1FpT2lKS01taFJYQzl4YkdKeWVFWXhYQzlpYXpCT2ExSTNlSGQ1ZDFaMVVHRTVkbXhYVGtGM1RtMUlZbFZoZDJzOUlpd2lZV3huSWpvaVVsTXlOVFlpZlEuZXlKemRXSWlPaUkyTW1vd2RqQm1PWEl4YjJ0cWMyVTJjWFYyYVdOaWMyUm9kU0lzSW5SdmEyVnVYM1Z6WlNJNkltRmpZMlZ6Y3lJc0luTmpiM0JsSWpvaWMzVndaWEpoY0hBdGNISnZaRnd2Y0hKdlpDSXNJbUYxZEdoZmRHbHRaU0k2TVRZek1qazBNRFU1T0N3aWFYTnpJam9pYUhSMGNITTZYQzljTDJOdloyNXBkRzh0YVdSd0xuVnpMV1ZoYzNRdE1TNWhiV0Y2YjI1aGQzTXVZMjl0WEM5MWN5MWxZWE4wTFRGZlExSkdOSEpCTlVNd0lpd2laWGh3SWpveE5qTXlPVFEwTVRrNExDSnBZWFFpT2pFMk16STVOREExT1Rnc0luWmxjbk5wYjI0aU9qSXNJbXAwYVNJNklqQmtPVFkyTlRBM0xXRmxOemt0TkRjNU1pMWhNVEE1TFdReFlUTmxZMlJpTWpZNE1TSXNJbU5zYVdWdWRGOXBaQ0k2SWpZeWFqQjJNR1k1Y2pGdmEycHpaVFp4ZFhacFkySnpaR2gxSW4wLm50Z0RBaDBFQm9oSVNXdlZRNlN4RlVPcmxhNmI5SFpuZGRjclVqODFITTdNdFdOUVllUGZOTjctTTgxS2gxWElOVVlNbndmazV0REQ5Z2ZOYzd6Sl9kb2Z6a3hQTnZPeUptX0tueGx2dVh4c3J4dmlFREJhcFdfdFlqQjYtbUhRclZ6Y012Z2g1NTRhRkNjMjU5c3hkVlY5ZDU0T1pQN2ZUc1JoRjRJUUFmcmRDUWxVWEJ0UTlxWWNMcUo0Wnl5b2ptY0E4WHRnWEphMkFfam5QdXRSXzVYcnhhZHYzdW9ZbGdLQUZZQkJDdXpNMDZqTkp6ekktODZ1OWk2YXEwcnpNd3owT3pQZmdFVVJkbzZKTkV1RDZxVU8xcjNIeEFpYVlHSFg5Y29pdkVnRVZwNDBIU214NmZLdmd1MUJYYUR2a0xLU1lmOUZIVXRORlJMc0JuYWY2d1wiLFxyXG4gICAgICAgICAgICAgICAgXCJ4LXNpY3VcIjogXCJiZDgxNTJkOTQzMmE0MDg1OWNmODJkY2JkNjQ2YjY4OVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ4LWlkLWludGVyYWNjaW9uXCI6IFwiM2U0ZmUyZTktN2Y5NS00NDE5LWJiZTktNWRkOTVlMTM0ZjU5XCIsXHJcbiAgICAgICAgICAgICAgICBcIngtdG9rZW4tdXN1YXJpb1wiOiBcImY3NWVmZGJmMmQ3NTRiZDgxMDhlMmRhNjEwYzE3NjFhXCIsXHJcbiAgICAgICAgICAgICAgICBcIngtdG9rZW4tYXV0aC1iZWFyZXJcIjogXCJleUpyYVdRaU9pSktNbWhSWEM5eGJHSnllRVl4WEM5aWF6Qk9hMUkzZUhkNWQxWjFVR0U1ZG14WFRrRjNUbTFJWWxWaGQyczlJaXdpWVd4bklqb2lVbE15TlRZaWZRLmV5SnpkV0lpT2lJMk1tb3dkakJtT1hJeGIydHFjMlUyY1hWMmFXTmljMlJvZFNJc0luUnZhMlZ1WDNWelpTSTZJbUZqWTJWemN5SXNJbk5qYjNCbElqb2ljM1Z3WlhKaGNIQXRjSEp2WkZ3dmNISnZaQ0lzSW1GMWRHaGZkR2x0WlNJNk1UWXpNamswTURVNU9Dd2lhWE56SWpvaWFIUjBjSE02WEM5Y0wyTnZaMjVwZEc4dGFXUndMblZ6TFdWaGMzUXRNUzVoYldGNmIyNWhkM011WTI5dFhDOTFjeTFsWVhOMExURmZRMUpHTkhKQk5VTXdJaXdpWlhod0lqb3hOak15T1RRME1UazRMQ0pwWVhRaU9qRTJNekk1TkRBMU9UZ3NJblpsY25OcGIyNGlPaklzSW1wMGFTSTZJakJrT1RZMk5UQTNMV0ZsTnprdE5EYzVNaTFoTVRBNUxXUXhZVE5sWTJSaU1qWTRNU0lzSW1Oc2FXVnVkRjlwWkNJNklqWXlhakIyTUdZNWNqRnZhMnB6WlRaeGRYWnBZMkp6WkdoMUluMC5udGdEQWgwRUJvaElTV3ZWUTZTeEZVT3JsYTZiOUhabmRkY3JVajgxSE03TXRXTlFZZVBmTk43LU04MUtoMVhJTlVZTW53Zms1dEREOWdmTmM3ekpfZG9memt4UE52T3lKbV9LbnhsdnVYeHNyeHZpRURCYXBXX3RZakI2LW1IUXJWemNNdmdoNTU0YUZDYzI1OXN4ZFZWOWQ1NE9aUDdmVHNSaEY0SVFBZnJkQ1FsVVhCdFE5cVljTHFKNFp5eW9qbWNBOFh0Z1hKYTJBX2puUHV0Ul81WHJ4YWR2M3VvWWxnS0FGWUJCQ3V6TTA2ak5KenpJLTg2dTlpNmFxMHJ6TXd6ME96UGZnRVVSZG82Sk5FdUQ2cVVPMXIzSHhBaWFZR0hYOWNvaXZFZ0VWcDQwSFNteDZmS3ZndTFCWGFEdmtMS1NZZjlGSFV0TkZSTHNCbmFmNndcIixcclxuICAgICAgICAgICAgICAgIFwieC1pZC1vcGVyYWNpb24tY29uY2lsaWFjaW9uXCI6IFwiaGM5eFQxbHZIMG1Xd2h0alAxZEF3UVwiLFxyXG4gICAgICAgICAgICAgICAgXCJ4LWlkLWRpc3Bvc2l0aXZvXCI6IFwiZDIwYjA5ZjYtZGNkYi00OTgxLWEyYmEtOTc1ZjM0ZWQ1MDBiXCIsXHJcbiAgICAgICAgICAgICAgICBcImFjY2VwdFwiOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgXCJ4LW5vbWJyZS1kaXNwb3NpdGl2b1wiOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgXCJ4LXNpc3RlbWEtZGlzcG9zaXRpdm9cIjogXCJXRUJcIixcclxuICAgICAgICAgICAgICAgIFwieC12ZXJzaW9uLWRpc3Bvc2l0aXZvXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBcIngtdmVyc2lvbi1hcGxpY2FjaW9uXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBcIngtbW9kZWxvLWRpc3Bvc2l0aXZvXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBcIngtZmFicmljYW50ZS1kaXNwb3NpdGl2b1wiOiBcIlwiLFxyXG4gICAgICAgICAgICAgICAgXCJ4LXNlcmllLXByb2Nlc2Fkb3JcIjogXCJcIixcclxuICAgICAgICAgICAgICAgIFwieC1vcGVyYWRvci10ZWxlZm9uaWFcIjogXCJcIixcclxuICAgICAgICAgICAgICAgIFwieC1sYXRpdHVkXCI6IFwiXCIsXHJcbiAgICAgICAgICAgICAgICBcIngtbG9uZ2l0dWRcIjogXCJcIixcclxuICAgICAgICAgICAgICAgIFwieC1pZC1sZWFsdGFkXCI6IFwiXCJcclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgIFwiaWRGbHVqb1wiOiBcIkNPTVBSQV9HSUZUQ0FSRFwiXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgICAgICAgICk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgcGF5bWVudC5cclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBib2R5XHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gaGVhZGVyc1xyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gc3VjY2Vzc1xyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gZXJyb3JcclxuICAgICAqL1xyXG4gICAgcGF5bWVudEJ1dHRvbjogZnVuY3Rpb24gKGJvZHksIGhlYWRlcnMsIHN1Y2Nlc3MsIGVycm9yKSB7XHJcbiAgICAgICAgLy8gY29uc3QgdXJsID0gJ2h0dHBzOi8vYXBpZ2F0ZXdheS5zdXBlcmFwcGJhei5jb20vaW50ZWdyYWNpb24vc3VwZXJhcHAvcGFnb3MvY2FwdGFjaW9uL3RyYXNwYXNvcy92MS9ib3Rvbi1wYWdvJztcclxuICAgICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9hcGkuYmF6LmFwcC9pbnRlZ3JhY2lvbi9zdXBlcmFwcC9wYWdvcy9jYXB0YWNpb24vdHJhc3Bhc29zL3YxL2JvdG9uLXBhZ28nO1xyXG4gICAgICAgIHJlcXVlc3Quc2VuZCh1cmwsICdQT1NUJywgYm9keSwgaGVhZGVycywgc3VjY2VzcywgZXJyb3IpO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBzZWxlY3RlZCBnaWZ0IGNhcmQuXHJcbiAgICAgKiBAcGFyYW0ge3N0cmlnbn0gaWRPcGVyYXRpb25cclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IHN1Y2Nlc3NcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGVycm9yXHJcbiAgICAgKi9cclxuICAgIHBheUdpZnRDYXJkOiBmdW5jdGlvbiAoaWRPcGVyYXRpb24sIHN1Y2Nlc3MsIGVycm9yKSB7XHJcbiAgICAgICAgLy8gY29uc3QgdXJsID0gJ2h0dHBzOi8vYXBpZ2F0ZXdheS5zdXBlcmFwcGJhei5jb20vaW50ZWdyYWNpb24vc3VwZXJhcHAvcGFnb3MvY2FwdGFjaW9uL3RyYXNwYXNvcy92MS9ib3Rvbi1wYWdvJztcclxuICAgICAgICBjb25zdCB1cmwgPSAnaHR0cHM6Ly9hcGkuYmF6LmFwcC9pbnRlZ3JhY2lvbi9zdXBlcmFwcC9wYWdvcy9jYXB0YWNpb24vdHJhc3Bhc29zL3YxL2JvdG9uLXBhZ28nO1xyXG4gICAgfSxcclxuXHJcbiAgICAvKipcclxuICAgICAqIE1ha2UgcmVxdWVzdC5cclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gYm9keVxyXG4gICAgICogQHBhcmFtIHtvYmplY3R9IGpzb25IZWFkZXJzIFxyXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gc3VjY2VzcyBcclxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IGVycm9yXHJcbiAgICAgKi9cclxuICAgIHNlbmQ6IGZ1bmN0aW9uICh1cmwsIG1ldGhvZCwgYm9keSwganNvbkhlYWRlcnMsIHN1Y2Nlc3MsIGVycm9yKSB7XHJcbiAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgdXJsLCBcclxuICAgICAgICAgICAgbWV0aG9kLFxyXG4gICAgICAgICAgICBjb250ZW50VHlwZTogJ2FwcGxpY2F0aW9uL2pzb24nLFxyXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsIFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBqc29uSGVhZGVycywgXHJcbiAgICAgICAgICAgIGRhdGE6IEpTT04uc3RyaW5naWZ5KGJvZHkpLFxyXG4gICAgICAgICAgICBzdWNjZXNzLFxyXG4gICAgICAgICAgICBlcnJvclxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59OyIsImxldCBnbG9iYWxJZFBlbGljdWxhLFxyXG4gIGdsb2JhbEltYWdlblBlbGljdWxhLFxyXG4gIGdsb2JhbE5vbWJyZVBlbGljdWxhLFxyXG4gIGdsb2JhbE51bWVyb0N1ZW50YUNsaWVudGVDYWRlbmFCYXosXHJcbiAgZ2xvYmFsQm90b25QYWdvLFxyXG4gIGdsb2JhbENvbXByYXMsXHJcbiAgZ2xvYmFsVG9rZW5PcGVyYWNpb24sXHJcbiAgZ2xvYmFsSGVhZGVycyxcclxuICBnbG9iYWxHaWZ0Q2FyZCxcclxuICBnbG9iYWxHaWZ0Q2FyZFBheW1lbnQ7XHJcblxyXG4vKipcclxuICogQmluZCBKU09OIHRvIEhUTUwuXHJcbiAqIEBwYXJhbSB7b2JqZWN0fSB2YWx1ZXNcclxuICovXHJcbmZ1bmN0aW9uIGJpbmQodmFsdWVzKSB7XHJcbiAgY29uc3QgJHRhZ3MgPSAkKFwiW2RhdGEtaWRdXCIpO1xyXG5cclxuICAkdGFncy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0ICR0YWcgPSAkKHRoaXMpO1xyXG4gICAgY29uc3QgaWQgPSAkdGFnLmRhdGEoXCJpZFwiKTtcclxuICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2lkXTtcclxuXHJcbiAgICBpZiAoaWQgPT09IFwicHJlY2lvXCIpIHtcclxuICAgICAgJHRhZy5odG1sKGZvcm1hdEFtb3VudCh2YWx1ZSkpO1xyXG4gICAgfSBlbHNlIGlmIChpZCA9PT0gXCJzYWxkb1wiKSB7XHJcbiAgICAgIGlmICh2YWx1ZSA9PT0gXCJmYWxzZVwiKSB7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHNob3dBZHZpY2UoJHRhZywgdHJ1ZSk7IH0sIDUwMCk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICR0YWcuaHRtbCh2YWx1ZSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQYXJzZSBzdHJpbmcgdG8gb2JqZWN0IGFuZCB0aGVuIGJpbmQuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJKc29uXHJcbiAqL1xyXG5mdW5jdGlvbiBiaW5kRnJvbVN0cihzdHJKc29uKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IGpzb24gPSBKU09OLnBhcnNlKHN0ckpzb24pO1xyXG4gICAgYmluZChqc29uKTtcclxuICB9IGNhdGNoIChlcnIpIHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ2hhbmdlIHNjcmVlbi5cclxuICogQHBhcmFtIHtqUXVlcnl9ICRzY3JlZW5cclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICovXHJcbmZ1bmN0aW9uIGNoYW5nZVNjcmVlbigkc2NyZWVuLCBjYWxsYmFjaykge1xyXG4gICQoXCIuc2NyZWVuXCIpLmFkZENsYXNzKFwibm8tdmlzaWJsZVwiKTtcclxuICAkc2NyZWVuLnJlbW92ZUNsYXNzKFwibm8tdmlzaWJsZVwiKTtcclxuXHJcbiAgdHlwZW9mIGNhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIgJiYgY2FsbGJhY2soKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbW91bnQgd2l0aCBjdXJyZW5jeSBmb3JtYXQuXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBhbW91bnRcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbmZ1bmN0aW9uIGZvcm1hdEFtb3VudChhbW91bnQpIHtcclxuICByZXR1cm4gKFwiJCBcIiArIE51bWJlcihhbW91bnQpLnRvRml4ZWQoMikucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEhhbmRsZSBkaWdpdCBrZXl1cCBldmVudC5cclxuICogQHBhcmFtIHtLZXlib2FyZEV2ZW50fSBldmVudFxyXG4gKi9cclxuZnVuY3Rpb24gaGFuZGxlRGlnaXRLZXl1cCh7IHRhcmdldCwga2V5Q29kZSB9KSB7XHJcbiAgY29uc3QgJHBhcmVudCA9ICQodGFyZ2V0LnBhcmVudE5vZGUpO1xyXG5cclxuICBpZiAoa2V5Q29kZSA9PT0gOCkge1xyXG4gICAgaWYgKCRwYXJlbnQucHJldigpLmxlbmd0aCA+IDApIHtcclxuICAgICAgY29uc3QgJGlucHV0ID0gJHBhcmVudC5wcmV2KCkuZmluZChcImlucHV0XCIpO1xyXG5cclxuICAgICAgJGlucHV0LnZhbChcIlwiKTtcclxuICAgICAgJGlucHV0LmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgfSBlbHNlIGlmIChrZXlDb2RlID4gNDcgJiYga2V5Q29kZSA8IDU4KSB7XHJcbiAgICBpZiAodGFyZ2V0LnZhbHVlICE9PSBcIlwiKSB7XHJcbiAgICAgIGlmICgkcGFyZW50Lm5leHQoKS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgY29uc3QgJGlucHV0ID0gJHBhcmVudC5uZXh0KCkuZmluZChcImlucHV0XCIpO1xyXG4gICAgICAgICRpbnB1dC5mb2N1cygpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICB2YWxpZGF0ZUNvZGUoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEFwcGx5IG51bWJlciBmaWx0ZXIuXHJcbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBudW1iZXJGaWx0ZXIoZXZlbnQpIHtcclxuICBjb25zdCBmaWx0ZXIgPSAvXlxcZHswLDF9JC87XHJcblxyXG4gIGlmIChmaWx0ZXIudGVzdCh0aGlzLnZhbHVlKSkge1xyXG4gICAgdGhpcy5vbGRWYWx1ZSA9IHRoaXMudmFsdWU7XHJcbiAgICB0aGlzLm9sZFNlbGVjdGlvblN0YXJ0ID0gdGhpcy5zZWxlY3Rpb25TdGFydDtcclxuICAgIHRoaXMub2xkU2VsZWN0aW9uRW5kID0gdGhpcy5zZWxlY3Rpb25FbmQ7XHJcbiAgfSBlbHNlIGlmICh0aGlzLmhhc093blByb3BlcnR5KFwib2xkVmFsdWVcIikpIHtcclxuICAgIHRoaXMudmFsdWUgPSB0aGlzLm9sZFZhbHVlO1xyXG4gICAgdGhpcy5zZXRTZWxlY3Rpb25SYW5nZSh0aGlzLm9sZFNlbGVjdGlvblN0YXJ0LCB0aGlzLm9sZFNlbGVjdGlvbkVuZCk7XHJcbiAgfSBlbHNlIHtcclxuICAgIHRoaXMudmFsdWUgPSBcIlwiO1xyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERvIGZha2UgcmVxdWVzdC5cclxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcclxuICovXHJcbmZ1bmN0aW9uIGZha2VSZXF1ZXN0KGNvZGUsIGNhbGxiYWNrKSB7XHJcbiAgc2V0VGltZW91dCgoKSA9PiB7IGNhbGxiYWNrKGNvZGUgPT09IFwiMDAwMDAxXCIpOyB9LCAxNTAwKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlIGxvY2F0aW9uLnNlYXJjaCB0byBKU09OLlxyXG4gKiBAcmV0dXJucyBvYmplY3RcclxuICovXHJcbmZ1bmN0aW9uIHNlYXJjaFRvSnNvbigpIHtcclxuICBjb25zdCBwYWlycyA9IGxvY2F0aW9uLnNlYXJjaC5zdWJzdHJpbmcoMSkuc3BsaXQoXCImXCIpO1xyXG4gIGNvbnN0IG9iamVjdCA9IHt9O1xyXG4gIGxldCBpID0gMDtcclxuXHJcbiAgZm9yICg7IGkgPCBwYWlycy5sZW5ndGg7IGkrKykge1xyXG4gICAgaWYgKHBhaXJzW2ldID09PSBcIlwiKSB7IGNvbnRpbnVlOyB9XHJcbiAgICBcclxuICAgIGNvbnN0IHBhcnRzID0gcGFpcnNbaV0uc3BsaXQoXCI9XCIpO1xyXG4gICAgb2JqZWN0W2RlY29kZVVSSUNvbXBvbmVudChwYXJ0c1swXSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHBhcnRzWzFdKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBvYmplY3Q7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93IG9yIGhpZGUgYWR2aWNlLlxyXG4gKiBAcGFyYW0ge2pRdWVyeX0gJGVsXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gZmxhZ1xyXG4gKi9cclxuZnVuY3Rpb24gc2hvd0FkdmljZSgkZWwsIGZsYWcpIHtcclxuICBpZiAoZmxhZykge1xyXG4gICAgJGVsLmFkZENsYXNzKFwibm8tdmlzaWJsZVwiKTtcclxuICB9IGVsc2Uge1xyXG4gICAgJGVsLnJlbW92ZUNsYXNzKFwibm8tdmlzaWJsZVwiKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93IG9yIGhpZGUgbG9hZGVyLlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNob3dcclxuICovXHJcbmZ1bmN0aW9uIHNob3dMb2FkZXIoc2hvdykge1xyXG4gIGxldCAkbG9hZGVyID0gJChcIi5sb2FkZXJcIik7XHJcblxyXG4gIGlmIChzaG93KSB7XHJcbiAgICBpZiAoJGxvYWRlci5sZW5ndGggPD0gMCkge1xyXG4gICAgICAkbG9hZGVyID0gJCgnPGRpdiBjbGFzcz1cImxvYWRlclwiPicpO1xyXG4gICAgfVxyXG5cclxuICAgICQoXCJib2R5XCIpLmFwcGVuZCgkbG9hZGVyKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gJGxvYWRlci5hZGRDbGFzcyhcImxvYWRlci12aXNpYmxlXCIpLCAxMCk7XHJcbiAgfSBlbHNlIHtcclxuICAgICRsb2FkZXIucmVtb3ZlQ2xhc3MoXCJsb2FkZXItdmlzaWJsZVwiKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gJGxvYWRlci5yZW1vdmUoKSwgMzc1KTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTaG93IG9yIGhpZGUgZXJyb3Igc2NyZWVuLlxyXG4gKiBAcGFyYW0ge2pxWEhSfSBqcVhIUlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFN0YXR1c1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JUaHJvd25cclxuICovXHJcbmZ1bmN0aW9uIHNob3dFcnJvclNjcmVlbihqcVhIUiwgdGV4dFN0YXR1cywgZXJyb3JUaHJvd24pIHtcclxuICBjb25zdCB7IHJlc3BvbnNlSlNPTjogeyBmb2xpbywgbWVuc2FqZSB9LCB9ID0ganFYSFI7XHJcblxyXG4gICQoXCIuZXJyb3Itc2NyZWVuXCIpLmZpbmQoJ1tkYXRhLWlkPVwibWVuc2FqZVwiXScpLnRleHQobWVuc2FqZSk7XHJcbiAgJChcIi5lcnJvci1zY3JlZW5cIikuZmluZCgnW2RhdGEtaWQ9XCJmb2xpb1wiXScpLnRleHQoZm9saW8pO1xyXG5cclxuICBjaGFuZ2VTY3JlZW4oJChcIi5lcnJvci1zY3JlZW5cIikpO1xyXG4gIHNob3dMb2FkZXIoZmFsc2UpO1xyXG59XHJcblxyXG4vKipcclxuICogVmFsaWRhdGUgY29kZSBmcm9tIGNsaWVudC5cclxuICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAqL1xyXG5mdW5jdGlvbiB2YWxpZGF0ZUNvZGUoKSB7XHJcbiAgY29uc3QgJGNvZGUgPSAkKFwiLmF1dGgtc2NyZWVuIC5jb2RlXCIpO1xyXG4gIGNvbnN0ICRkaWdpdHMgPSAkKFwiLmF1dGgtc2NyZWVuIC5kaWdpdCBpbnB1dFwiKTtcclxuICBsZXQgY29kZSA9IFwiXCI7XHJcblxyXG4gICRkaWdpdHMuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICBjb2RlICs9IHRoaXMudmFsdWU7XHJcbiAgfSk7XHJcblxyXG4gIGlmIChjb2RlLmxlbmd0aCA9PT0gNikge1xyXG4gICAgc2hvd0xvYWRlcih0cnVlKTtcclxuXHJcbiAgICBmYWtlUmVxdWVzdChjb2RlLCAoc3VjY2VzcykgPT4ge1xyXG4gICAgICBpZiAoc3VjY2Vzcykge1xyXG4gICAgICAgICRjb2RlLmFkZENsYXNzKFwidmFsaWRcIik7XHJcblxyXG4gICAgICAgIGNoYW5nZVNjcmVlbigkKFwiLnJlc3VtZS1zY3JlZW5cIiksICgpID0+IHtcclxuICAgICAgICAgIHNob3dMb2FkZXIoZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHNob3dMb2FkZXIoZmFsc2UpO1xyXG4gICAgICAgICRjb2RlLmFkZENsYXNzKFwiaW52YWxpZFwiKTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAkZGlnaXRzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnZhbChcIlwiKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgJGRpZ2l0cy5lcSgwKS5mb2N1cygpO1xyXG4gICAgICAgIH0sIDEwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICAkY29kZS5yZW1vdmVDbGFzcyhcInZhbGlkIGludmFsaWRcIik7XHJcbiAgfVxyXG59XHJcblxyXG4vLyBJbml0aWFsaXplIERldGFpbCBTY3JlZW4gY29tcG9uZW50cy5cclxuY29uc3Qgc2VhcmNoSnNvbiA9IHNlYXJjaFRvSnNvbigpO1xyXG5cclxuc2hvd0xvYWRlcih0cnVlKTtcclxucmVxdWVzdC5tb3ZpZUJ5SWQoXHJcbiAgc2VhcmNoSnNvbltcImlkXCJdLFxyXG4gIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIiVvXCIsIGRhdGEpO1xyXG5cclxuICAgIGNvbnN0IHsgcmVzdWx0YWRvOiB7IGRhdG9zRmx1am8sIGhlYWRlcnMsIGlkRmx1am8gfSwgfSA9IGRhdGE7XHJcblxyXG4gICAgZ2xvYmFsSGVhZGVycyA9IGhlYWRlcnM7XHJcblxyXG4gICAgaWYgKGlkRmx1am8gPT09IFwiQ09NUFJBX0dJRlRDQVJEXCIpIHtcclxuICAgICAgY29uc3QgeyBnaWZ0Q2FyZCwgZ2lmdENhcmRQYXltZW50IH0gPSBkYXRvc0ZsdWpvO1xyXG5cclxuICAgICAgZ2xvYmFsR2lmdENhcmQgPSBnaWZ0Q2FyZDtcclxuICAgICAgZ2xvYmFsR2lmdENhcmRQYXltZW50ID0gZ2lmdENhcmRQYXltZW50O1xyXG5cclxuICAgICAgJCgnLmdpdENhcmQtYW1vdXQnKS5maW5kKCdbZGF0YS1pZD1cIm5vbWJyZVwiXScpLnRleHQoZ2xvYmFsR2lmdENhcmQubmFtZSk7XHJcbiAgICAgICQoJy5naXRDYXJkLWFtb3V0JykuZmluZCgnW2RhdGEtaWQ9XCJtb250b3NcIl0nKS5lbXB0eSgpO1xyXG5cclxuICAgICAgZ2xvYmFsR2lmdENhcmQuYW1vdW50cy5mb3JFYWNoKGFtb3VudCA9PiB7XHJcbiAgICAgICAgY29uc3Qgb3B0aW9uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuXHJcbiAgICAgICAgb3B0aW9uRWwuc2V0QXR0cmlidXRlKCd2YWx1ZScsIGFtb3VudC5pZCk7XHJcbiAgICAgICAgb3B0aW9uRWwuaW5uZXJUZXh0ID0gZm9ybWF0QW1vdW50KGFtb3VudC5wcmVjaW9zKTtcclxuICAgICAgICBvcHRpb25FbC5vYmogPSBhbW91bnQ7XHJcbiAgICAgICAgb3B0aW9uRWwuY2xhc3NMaXN0LmFkZCgnY29sb3JQcmljZScpO1xyXG5cclxuICAgICAgICAkKCcuZ2l0Q2FyZC1hbW91dCcpLmZpbmQoJ1tkYXRhLWlkPVwibW9udG9zXCJdJykuYXBwZW5kKG9wdGlvbkVsKTtcclxuICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgY2hhbmdlU2NyZWVuKCQoXCIuZ2l0Q2FyZC1hbW91dFwiKSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCB7IGlkUGVsaWN1bGEsIGltYWdlblBlbGljdWxhLCBub21icmVQZWxpY3VsYSwgbnVtZXJvQ3VlbnRhQ2xpZW50ZUNhZGVuYUJheiwgYm90b25QYWdvLCBjb21wcmFzLCB0b2tlbk9wZXJhY2lvbiwgfSA9IGRhdG9zRmx1am87XHJcblxyXG4gICAgICBnbG9iYWxJZFBlbGljdWxhID0gaWRQZWxpY3VsYTtcclxuICAgICAgZ2xvYmFsSW1hZ2VuUGVsaWN1bGEgPSBpbWFnZW5QZWxpY3VsYTtcclxuICAgICAgZ2xvYmFsTm9tYnJlUGVsaWN1bGEgPSBub21icmVQZWxpY3VsYTtcclxuICAgICAgZ2xvYmFsTnVtZXJvQ3VlbnRhQ2xpZW50ZUNhZGVuYUJheiA9IG51bWVyb0N1ZW50YUNsaWVudGVDYWRlbmFCYXo7XHJcbiAgICAgIGdsb2JhbEJvdG9uUGFnbyA9IGJvdG9uUGFnby50cmFuc2FjY2lvbjtcclxuICAgICAgZ2xvYmFsQ29tcHJhcyA9IGNvbXByYXMudHJhbnNhY2Npb247XHJcbiAgICAgIGdsb2JhbFRva2VuT3BlcmFjaW9uID0gdG9rZW5PcGVyYWNpb247XHJcblxyXG4gICAgICAvLyBGaWxsIGRldGFpbCBzY3JlZW4uXHJcbiAgICAgICQoXCIuZGV0YWlsLXNjcmVlblwiKS5maW5kKCdbZGF0YS1pZD1cIm5vbWJyZVwiXScpLnRleHQoZ2xvYmFsTm9tYnJlUGVsaWN1bGEpO1xyXG4gICAgICAkKFwiLmRldGFpbC1zY3JlZW5cIikuZmluZCgnW2RhdGEtaWQ9XCJwcmVjaW9cIl0nKS50ZXh0KGZvcm1hdEFtb3VudChnbG9iYWxCb3RvblBhZ28uZGV0YWxsZVBhZ28ubW9udG9FbnZpbykpO1xyXG4gICAgICAkKFwiLmRldGFpbC1zY3JlZW5cIikuZmluZCgnW2RhdGEtaWQ9XCJ0YXJqZXRhXCJdJykudGV4dChnbG9iYWxOdW1lcm9DdWVudGFDbGllbnRlQ2FkZW5hQmF6KTtcclxuXHJcbiAgICAgIGNoYW5nZVNjcmVlbigkKFwiLmRldGFpbC1zY3JlZW5cIikpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dMb2FkZXIoZmFsc2UpO1xyXG4gIH0sXHJcbiAgc2hvd0Vycm9yU2NyZWVuXHJcbik7XHJcblxyXG5jb25zdCAkYWR2aWNlcyA9ICQoXCIuYWR2aWNlLmZpeGVkXCIpO1xyXG4kYWR2aWNlcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICBjb25zdCAkYWR2aWNlID0gJCh0aGlzKTtcclxuICBjb25zdCAkY2xvc2VCdG4gPSAkYWR2aWNlLmZpbmQoXCIuY2xvc2UtYnRuXCIpO1xyXG5cclxuICAkY2xvc2VCdG4ub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBzaG93QWR2aWNlKCRhZHZpY2UsIGZhbHNlKTtcclxuICB9KTtcclxufSk7XHJcblxyXG4kKFwiLnJlbnQtYnV0dG9uXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xyXG4gIGNvbnNvbGUubG9nKFwic2NyaXB0cy5qczogQ2xpY2sgcmVudCBidXR0b24uXCIpO1xyXG5cclxuICBjb25zdCBwYXltZW50QnV0dG9uSGVhZGVycyA9IHsgLi4uZ2xvYmFsSGVhZGVycyB9O1xyXG4gIGNvbnN0IGJ1eU1vdmllSGVhZGVycyA9IHsgLi4uZ2xvYmFsSGVhZGVycyB9O1xyXG5cclxuICBkZWxldGUgYnV5TW92aWVIZWFkZXJzW1wieC1pZC1vcGVyYWNpb24tY29uY2lsaWFjaW9uXCJdO1xyXG5cclxuICBzaG93TG9hZGVyKHRydWUpO1xyXG4gIHJlcXVlc3QucGF5bWVudEJ1dHRvbih7IHRyYW5zYWNjaW9uOiB7IC4uLmdsb2JhbEJvdG9uUGFnbywgdG9rZW5PcGVyYWNpb246IGdsb2JhbFRva2VuT3BlcmFjaW9uIH0sIH0sIHBheW1lbnRCdXR0b25IZWFkZXJzLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcInNjcmlwdHMuanM6IFBheW1lbnQgYnV0dG9uLiAlb1wiLCBkYXRhKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgcmVzdWx0YWRvOiB7IGZlY2hhT3BlcmFjaW9uLCBob3JhT3BlcmFjaW9uIH0sIH0gPSBkYXRhO1xyXG5cclxuICAgICAgcmVxdWVzdC5idXlNb3ZpZShnbG9iYWxJZFBlbGljdWxhLCB7IHRyYW5zYWNjaW9uOiB7IC4uLmdsb2JhbENvbXByYXMsIGZlY2hhT3BlcmFjaW9uOiBkYXRhLnJlc3VsdGFkby5mZWNoYU9wZXJhY2lvbiwgbnVtZXJvTW92aW1pZW50bzogZGF0YS5yZXN1bHRhZG8ubnVtZXJvTW92aW1pZW50bywgfSwgfSwgYnV5TW92aWVIZWFkZXJzLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJzY3JpcHRzLmpzOiBCdXkgbW92aWUuICVvXCIsIGRhdGEpO1xyXG5cclxuICAgICAgICAgIGNvbnN0IHsgZm9saW8gfSA9IGRhdGE7XHJcblxyXG4gICAgICAgICAgLy8gRmlsbCByZXN1bWUgc2NyZWVuLlxyXG4gICAgICAgICAgJChcIi5yZXN1bWUtc2NyZWVuXCIpLmZpbmQoJ1tkYXRhLWlkPVwiZmVjaGFcIl0nKS50ZXh0KGAke2ZlY2hhT3BlcmFjaW9ufSwgJHtob3JhT3BlcmFjaW9ufWApO1xyXG4gICAgICAgICAgJChcIi5yZXN1bWUtc2NyZWVuXCIpLmZpbmQoJ1tkYXRhLWlkPVwicHJlY2lvXCJdJykudGV4dChmb3JtYXRBbW91bnQoZ2xvYmFsQm90b25QYWdvLmRldGFsbGVQYWdvLm1vbnRvRW52aW8pKTtcclxuICAgICAgICAgICQoXCIucmVzdW1lLXNjcmVlblwiKS5maW5kKCdbZGF0YS1pZD1cInRhcmpldGFcIl0nKS50ZXh0KGdsb2JhbE51bWVyb0N1ZW50YUNsaWVudGVDYWRlbmFCYXopO1xyXG4gICAgICAgICAgJChcIi5yZXN1bWUtc2NyZWVuXCIpLmZpbmQoJ1tkYXRhLWlkPVwibm9tYnJlXCJdJykudGV4dChnbG9iYWxOb21icmVQZWxpY3VsYSk7XHJcbiAgICAgICAgICAkKFwiLnJlc3VtZS1zY3JlZW5cIikuZmluZCgnW2RhdGEtaWQ9XCJwcmVjaW9cIl0nKS50ZXh0KGZvcm1hdEFtb3VudChnbG9iYWxCb3RvblBhZ28uZGV0YWxsZVBhZ28ubW9udG9FbnZpbykpO1xyXG4gICAgICAgICAgJChcIi5yZXN1bWUtc2NyZWVuXCIpLmZpbmQoJ1tkYXRhLWlkPVwiZm9saW9cIl0nKS50ZXh0KGZvbGlvKTtcclxuXHJcbiAgICAgICAgICBjaGFuZ2VTY3JlZW4oJChcIi5yZXN1bWUtc2NyZWVuXCIpKTtcclxuICAgICAgICAgIHNob3dMb2FkZXIoZmFsc2UpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2hvd0Vycm9yU2NyZWVuXHJcbiAgICAgICk7XHJcbiAgICB9LFxyXG4gICAgc2hvd0Vycm9yU2NyZWVuXHJcbiAgKTtcclxufSk7XHJcblxyXG4vLyBJbml0aWFsaXplIEF1dGggU2NyZWVuIGNvbXBvbmVudHMuXHJcbmNvbnN0ICRkaWdpdHMgPSAkKFwiLmF1dGgtc2NyZWVuIC5kaWdpdCBpbnB1dFwiKTtcclxuXHJcbiRkaWdpdHMub24oXCJrZXlwcmVzcyBrZXlkb3duIGtleXVwIGlucHV0IGNoYW5nZSBwYXN0ZVwiLCBudW1iZXJGaWx0ZXIpO1xyXG4kZGlnaXRzLm9uKFwia2V5dXBcIiwgaGFuZGxlRGlnaXRLZXl1cCk7XHJcblxyXG4kZGlnaXRzLmVxKDApLmZvY3VzKCk7XHJcblxyXG4vLyBJbml0aWFsaXplIHNoYXJlIGJ1dHRvbi5cclxuJChcIi5zaGFyZS1idG5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc29sZS5sb2coXCJzY3JpcHRzLmpzOiBTaGFyaW5nIHRpY2tldFwiKTtcclxufSk7XHJcblxyXG4vLyBJbml0aWFsaXplIG1vdmllIGJ1dHRvbi5cclxuJChcIi5tb3ZpZS1idG5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgY29uc29sZS5sb2coXCJzY3JpcHRzLmpzOiBHbyB0byBtb3ZpZSBidXR0b24gY2xpY2suXCIpO1xyXG5cclxuICAkKFwiLnN1Y2Nlc3Mtc2NyZWVuXCIpLmZpbmQoJ1tkYXRhLWlkPVwibm9tYnJlXCJdJykudGV4dChnbG9iYWxOb21icmVQZWxpY3VsYSk7XHJcbiAgJChcIi5zdWNjZXNzLXNjcmVlblwiKS5maW5kKFwiLnNlZS1tb3ZpZS1ocmVmXCIpLmF0dHIoXCJocmVmXCIsIGBpbnRlbnQ6Ly8/dmVyUGVsaWN1bGE/ZGF0YT0ke2J0b2EoZ2xvYmFsSWRQZWxpY3VsYSl9I0ludGVudDtzY2hlbWU9c2FwcGRsO2FjdGlvbj1hbmRyb2lkLmludGVudC5hY3Rpb24uVklFVztTLmJyb3dzZXJfZmFsbGJhY2tfdXJsPWh0dHBzJTNBJTJGJTJGcGxheS5nb29nbGUuY29tL3N0b3JlL2FwcHMvZGV0YWlscz9pZD1teC5hcHAuYmF6LnN1cGVyYXBwO2VuZGApO1xyXG5cclxuICAvLyBXYWl0IGZvciBpbWFnZSBpcyBhbHJlYWR5IGxvYWRlZC5cclxuICBpZiAoZ2xvYmFsSW1hZ2VuUGVsaWN1bGEpIHtcclxuICAgICQoYDxpbWcgc3JjPVwiJHtnbG9iYWxJbWFnZW5QZWxpY3VsYX1cIj5gKS5vbihcImxvYWRcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKFwiLnN1Y2Nlc3Mtc2NyZWVuXCIpLmZpbmQoJ1tkYXRhLWlkPVwiaW1hZ2VuXCJdJykuYXR0cihcInN0eWxlXCIsIGBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHtnbG9iYWxJbWFnZW5QZWxpY3VsYX0pYCkuYWRkQ2xhc3MoXCJkaXNwbGF5ZWRcIik7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGNoYW5nZVNjcmVlbigkKFwiLnN1Y2Nlc3Mtc2NyZWVuXCIpKTtcclxufSk7XHJcbiJdfQ==
